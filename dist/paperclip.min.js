(function e(t,n,r){function i(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(s)return s(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var s=typeof require=="function"&&require;for(var o=0;o<r.length;o++)i(r[o]);return i})({1:[function(e,t,n){function i(){}var r=e("protoclass");t.exports=r(i,{__isScope:!0})},{protoclass:82}],2:[function(e,t,n){var r=e("./base");t.exports=r.extend({_getters:{},_setters:{},_watchers:[],castObject:function(e){return e},call:function(e,t,n){var r=t.pop(),i=t.length?this.get(e,t):e;if(!i)return;return i[r].apply(i,n)},get:function(e,t){typeof t=="string"&&(t=[t]);var n=t.join("."),r;(r=this._getters[n])||(r=this._getters[n]=new Function("return this."+n));try{return r.call(e)}catch(i){return void 0}},set:function(e,t,n){typeof t=="string"&&(t=[t]);var r=t.join("."),i;(i=this._setters[r])||(i=this._setters[r]=new Function("value","return this."+r+"=value"));var s;try{s=i.call(e,n)}catch(o){return void 0}return this.apply(),s},watchProperty:function(e,t,n){var r=this,i,s=!0;return this._addWatcher(function(){var o=r.get(e,t);if(!s&&o===i&&typeof o!="function")return;s=!0;var u=i;i=o,n(o,i)})},_addWatcher:function(e){var t=this,n={apply:e,trigger:e,dispose:function(){var e=t._watchers.indexOf(n);~e&&t._watchers.splice(e,1)}};return this._watchers.push(n),n},watchEvent:function(e,t,n){return Object.prototype.toString.call(e)==="[object Array]"&&t==="change"?this._watchArrayChangeEvent(e,n):{dispose:function(){}}},_watchArrayChangeEvent:function(e,t){var n=e.concat();return this._addWatcher(function(){var r=e.length!==n.length;if(!r)for(var i=0,s=n.length;i<s;i++){r=n[i]!==e[i];if(r)break}r&&(n=e.concat(),t())})},normalizeCollection:function(e){return e},normalizeObject:function(e){return e},apply:function(){for(var e=0,t=this._watchers.length;e<t;e++)this._watchers[e].apply()}})},{"./base":1}],3:[function(e,t,n){function i(e){this.view=e.view,this.node=e.node,this.section=e.section,this.key=e.key,this.value=e.value,this.nodeFactory=this.view.template.nodeFactory,this.initialize()}var r=e("protoclass");t.exports=r(i,{initialize:function(){},bind:function(){},unbind:function(){}})},{protoclass:82}],4:[function(e,t,n){var r=e("./script");t.exports=r.extend({update:function(){var e=this.currentValue;if(typeof e=="string")return this.node.setAttribute("class",e);if(!e)return this.node.removeAttribute("class");var t=this.node.getAttribute("class");t=t?t.split(" "):[];for(var n in e){var r=e[n],i=n.split(/,\s*/);for(var s=0,o=i.length;s<o;s++){var u=i[s],a=t.indexOf(u);r?~a||t.push(u):~a&&t.splice(a,1)}}this.node.setAttribute("class",t.join(" "))}}),t.exports.test=function(e){return typeof e=="object"&&!e.buffered}},{"./script":14}],5:[function(e,t,n){var r=e("./keyCodedEvent");t.exports=r.extend({keyCodes:[8]})},{"./keyCodedEvent":13}],6:[function(e,t,n){var r=e("./base");t.exports=r.extend({initialize:function(){this.view.transitions.push(this)},enter:function(){var e=this.value;e.evaluate&&(e=e.evaluate(this.view),e(this.node,function(){}))}})},{"./base":3}],7:[function(e,t,n){var r=e("./base");t.exports=r.extend({initialize:function(){this.view.transitions.push(this)},exit:function(e){var t=this.value;if(t.evaluate)return t=t.evaluate(this.view),t(this.node,e);e()}})},{"./base":3}],8:[function(e,t,n){var r=e("./script");t.exports=r.extend({update:function(){this.currentValue?this.node.removeAttribute("disabled"):this.node.setAttribute("disabled","disabled")}})},{"./script":14}],9:[function(e,t,n){var r=e("./keyCodedEvent");t.exports=r.extend({keyCodes:[13]})},{"./keyCodedEvent":13}],10:[function(e,t,n){var r=e("./keyCodedEvent");t.exports=r.extend({keyCodes:[27]})},{"./keyCodedEvent":13}],11:[function(e,t,n){function o(e){this._onEvent=i(this._onEvent,this),s.call(this,e)}var r=e("protoclass"),i=e("../utils/bind"),s=e("./base");s.extend(o,{initialize:function(){var e=this.event||(this.event=this.key.toLowerCase().replace(/^on/,""));this.node.addEventListener(e,this._onEvent)},bind:function(){s.prototype.bind.call(this),this.bound=!0},_onEvent:function(e){if(!this.bound)return;e.preventDefault(),this.view.set("event",e),this.value.evaluate(this.view)},unbind:function(){this.bound=!1}}),t.exports=o},{"../utils/bind":71,"./base":3,protoclass:82}],12:[function(e,t,n){var r=e("./script");t.exports=r.extend({update:function(){if(!this.currentValue)return;if(this.node.focus){var e=this;setTimeout(function(){e.node.focus()},1)}}})},{"./script":14}],13:[function(e,t,n){var r=e("./event");t.exports=r.extend({event:"keydown",keyCodes:[],_onEvent:function(e){if(!~this.keyCodes.indexOf(e.keyCode))return;r.prototype._onEvent.apply(this,arguments)}})},{"./event":11}],14:[function(e,t,n){var r=e("./base");t.exports=r.extend({bind:function(){r.prototype.bind.call(this);var e=this;this._binding=this.value.bind(this.view,function(t){if(t===e.currentValue)return;e.currentValue=t,e.view.runloop.deferOnce(e)}),this.currentValue=this.value.evaluate(this.view),this.currentValue!=null&&this.update()},update:function(){},unbind:function(){this._binding.dispose()}})},{"./base":3}],15:[function(e,t,n){var r=e("./script");t.exports=r.extend({initialize:function(){this._displayStyle=this.node.style.display},update:function(){var e=this.currentValue,t=e?this._displayStyle:"none";this.node.__isNode?this.node.style.setProperties({display:t}):this.node.style.display=t}})},{"./script":14}],16:[function(e,t,n){var r=e("./script");t.exports=r.extend({bind:function(){this._currentStyles={},r.prototype.bind.call(this)},update:function(){var e=this.currentValue,t={};for(var n in e){var r=e[n];r!==this._currentStyles[n]&&(t[n]=this._currentStyles[n]=r||"")}if(this.node.__isNode)this.node.style.setProperties(t);else for(var i in t)this.node.style[i]=t[i]}}),t.exports.test=function(e){return typeof e=="object"&&!e.buffered}},{"./script":14}],17:[function(e,t,n){(function(n){function s(e){this._onInput=i(this._onInput,this),r.call(this,e)}var r=e("./script"),i=e("../utils/bind");r.extend(s,{_events:["change","keyup","input"],initialize:function(){var e=this;this._events.forEach(function(t){e.node.addEventListener(t,e._onInput)})},bind:function(){r.prototype.bind.call(this);var e=this;/^(text|password|email)$/.test(this.node.getAttribute("type"))&&(this._autocompleteCheckInterval=setInterval(function(){e._onInput()},n.browser?500:10))},unbind:function(){r.prototype.unbind.call(this),clearInterval(this._autocompleteCheckInterval);var e=this},update:function(){var e=this.model=this.currentValue;if(!e||!e.__isReference)throw new Error("input value must be a reference. Make sure you have <~> defined");this._modelBindings&&this._modelBindings.dispose();if(!e)return;var t=this;this._modelBindings=this.view.watch(e.path,function(e){t._elementValue(t._parseValue(e))}).trigger()},_parseValue:function(e){return e==null||e===""?void 0:e},test:function(e){return e.length===1},_onInput:function(e){clearInterval(this._autocompleteCheckInterval),e&&(!e.keyCode||!~[27].indexOf(e.keyCode))&&e.stopPropagation();var t=this._parseValue(this._elementValue());if(!this.model)return;if(String(this.model.value())==String(t))return;this.model.value(t)},_elementValue:function(e){var t=/checkbox/.test(this.node.type),n=/radio/.test(this.node.type),r=t||n,i=Object.prototype.hasOwnProperty.call(this.node,"value")||/input|textarea|checkbox/.test(this.node.nodeName.toLowerCase());if(!arguments.length)return t?Boolean(this.node.checked):i?this.node.value||"":this.node.innerHTML||"";e==null?e="":clearInterval(this._autocompleteCheckInterval),r?n?String(e)===String(this.node.value)&&(this.node.checked=!0):this.node.checked=e:String(e)!==this._elementValue()&&(i?this.node.value=e:this.node.innerHTML=e)}}),s.test=function(e){return typeof e=="object"&&!e.buffered},t.exports=s}).call(this,e("_process"))},{"../utils/bind":71,"./script":14,_process:78}],18:[function(e,t,n){var r=e("nofactor"),i=e("./parser"),s=e("./defaults"),o=e("./template");o.parser=i;var u=t.exports={accessors:s.accessors,runloop:s.runloop,nodeFactory:r,Component:e("./components/base"),Attribute:e("./attributes/base"),template:o,components:s.components,attributes:s.attributes,modifiers:s.modifiers,parse:i.parse};typeof window!="undefined"&&(window.paperclip=u,window.paperclip.noConflict=function(){return delete window.paperclip,u})},{"./attributes/base":3,"./components/base":19,"./defaults":25,"./parser":47,"./template":54,nofactor:81}],19:[function(e,t,n){function s(e){this.attributes=e.attributes,this.childTemplate=e.childTemplate,this.view=e.view,this.section=e.section,this.nodeFactory=this.view.template.nodeFactory,this.didChange=i(this.didChange,this),this.initialize()}var r=e("protoclass"),i=e("../utils/bind");t.exports=r(s,{initialize:function(){},bind:function(){this.update()},didChange:function(){this.view.runloop.deferOnce(this)},unbind:function(){this._changeListener&&this._changeListener.dispose()},update:function(){}})},{"../utils/bind":71,protoclass:82}],20:[function(e,t,n){function i(e){r.call(this,e)}var r=e("./base");t.exports=r.extend({update:function(){this._updateListener&&this._updateListener.dispose();var e=this.attributes.as,t=this.attributes.each,n=this.view.accessor;t||(t=[]),this._updateListener=n.watchEvent(t,"change",function(){r.view.runloop.deferOnce(r)}),t=n.normalizeCollection(t),this._children||(this._children=[]);var r=this;for(var i=0,s=t.length;i<s;i++){var o,u=t[i];e?(o={index:i},o[e]=u):o=u;if(i<this._children.length){var a=this._children[i];(a.context===u||a.context[e]!==u)&&a.bind(o)}else{var f=this.childTemplate.view(o,{parent:this.view});this._children.push(f),this.section.appendChild(f.render())}}this._children.splice(i).forEach(function(e){e.dispose()})}})},{"./base":19}],21:[function(e,t,n){function i(e){r.call(this,e)}var r=e("./base");t.exports=r.extend(i,{update:function(){var e=!!this.attributes.when;if(this._show===e)return;this._show=e,e?(this._view=this.childTemplate.view(this.view.context),this.section.appendChild(this._view.render())):(this._view&&this._view.dispose(),this._view=void 0)}})},{"./base":19}],22:[function(e,t,n){function i(e){r.call(this,e);var t=this;this.childTemplates=this.childTemplate.vnode.children.map(function(e){return t.childTemplate.child(e)})}var r=e("./base");t.exports=r.extend(i,{update:function(){var e,t=this.attributes.state;if(typeof t=="number")e=this.childTemplates[t];else for(var n=this.childTemplates.length;n--;){var r=this.childTemplates[n];if(r.vnode.attributes.name===t){e=r;break}}if(this.currentTemplate===e)return;this.currentTemplate=e,this.currentView&&this.currentView.dispose();if(!e)return;this.currentView=e.view(this.view.context),this.currentTemplate=e,this.section.appendChild(this.currentView.render())}})},{"./base":19}],23:[function(e,t,n){function s(e){r.call(this,e);var t=this;this.childTemplates=this.childTemplate.vnode.children.map(function(e){return t.childTemplate.child(e)})}var r=e("./base"),i=e("../utils/bind");t.exports=r.extend(s,{bind:function(){r.prototype.bind.call(this),this.bindings=[];var e=i(this.update,this);for(var t=0,n=this.childTemplates.length;t<n;t++){var s=this.childTemplates[t].vnode.attributes.when;if(!s)continue;this.bindings.push(s.bind(this.view,this.didChange))}},unbind:function(){for(var e=this.bindings.length;e--;)this.bindings[e].dispose()},update:function(){var e;for(var t=0,n=this.childTemplates.length;t<n;t++){e=this.childTemplates[t];var r=e.vnode.attributes.when;if(!r||r.evaluate(this.view))break}if(this.currentChild==e){this._view&&this._view.context!==this.context&&this._view.bind(this.view.context);return}this._view&&this._view.dispose();if(t==n)return;this.currentChild=e;var i=e.child(e.vnode.children,{accessor:this.view.accessor});this._view=i.view(this.view.context),this.section.appendChild(this._view.render())}})},{"../utils/bind":71,"./base":19}],24:[function(e,t,n){function i(e){r.call(this,e)}var r=e("./base");t.exports=r.extend(i,{update:function(){var e=this.attributes.html;typeof e=="object"&&e.evaluate&&(e=void 0),this.currentValue&&this.currentValue.remove&&this.currentValue.remove(),this.currentValue=e;if(!e)return this.section.removeAll();var t;if(e.render)e.remove(),t=e.render();else if(e.nodeType!=null)t=e;else if(this.nodeFactory.name!=="dom")t=this.nodeFactory.createTextNode(String(e));else{var n=this.nodeFactory.createElement("div");n.innerHTML=String(e),t=this.nodeFactory.createFragment(n.childNodes)}this.section.replaceChildNodes(t)}})},{"./base":19}],25:[function(e,t,n){(function(n){var r=e("./runloop"),i=e("./accessors/pojo");t.exports={accessorClass:i,accessors:{pojo:e("./accessors/pojo")},components:{repeat:e("./components/repeat"),stack:e("./components/stack"),"switch":e("./components/switch"),show:e("./components/show"),unsafe:e("./components/unsafe")},attributes:{value:e("./attributes/value"),checked:e("./attributes/value"),enable:e("./attributes/enable"),focus:e("./attributes/focus"),show:e("./attributes/show"),style:e("./attributes/style"),"class":e("./attributes/class"),easein:e("./attributes/easeIn"),easeout:e("./attributes/easeOut"),onclick:e("./attributes/event"),ondoubleclick:e("./attributes/event"),onfocus:e("./attributes/event"),onload:e("./attributes/event"),onsubmit:e("./attributes/event"),onmousedown:e("./attributes/event"),onchange:e("./attributes/event"),onmouseup:e("./attributes/event"),onmouseover:e("./attributes/event"),onmouseout:e("./attributes/event"),onfocusin:e("./attributes/event"),onfocusout:e("./attributes/event"),onmousemove:e("./attributes/event"),onkeydown:e("./attributes/event"),onkeyup:e("./attributes/event"),onenter:e("./attributes/enter"),ondelete:e("./attributes/delete"),onescape:e("./attributes/escape")},runloop:new r({tick:n.env.PC_DEBUG?n.nextTick:n.env.browser?void 0:void 0}),modifiers:{uppercase:function(e){return String(e).toUpperCase()},lowercase:function(e){return String(e).toLowerCase()},titlecase:function(e){var t;return t=String(e),t.substr(0,1).toUpperCase()+t.substr(1)},json:function(e,t,n){return JSON.stringify.apply(JSON,arguments)},isNaN:function(e){return isNaN(e)},round:Math.round}}}).call(this,e("_process"))},{"./accessors/pojo":2,"./attributes/class":4,"./attributes/delete":5,"./attributes/easeIn":6,"./attributes/easeOut":7,"./attributes/enable":8,"./attributes/enter":9,"./attributes/escape":10,"./attributes/event":11,"./attributes/focus":12,"./attributes/show":15,"./attributes/style":16,"./attributes/value":17,"./components/repeat":20,"./components/show":21,"./components/stack":22,"./components/switch":23,"./components/unsafe":24,"./runloop":49,_process:78}],26:[function(e,t,n){function s(e){this.expressions=e||new i,r.apply(this,arguments)}var r=e("./base"),i=e("./parameters");r.extend(s,{type:"array",toJavaScript:function(){return"["+this.expressions.toJavaScript()+"]"}}),t.exports=s},{"./base":28,"./parameters":40}],27:[function(e,t,n){function i(e,t){r.apply(this,arguments),this.reference=e,this.value=t}var r=e("./base");r.extend(i,{type:"assignment",toJavaScript:function(){var e=this.reference.path.map(function(e){return"'"+e+"'"}).join(", ");return"this.set(["+e+"], "+this.value.toJavaScript()+")"}}),t.exports=i},{"./base":28}],28:[function(e,t,n){function i(){this._children=[],this._addChildren(Array.prototype.slice.call(arguments,0))}var r=e("protoclass");r(i,{__isExpression:!0,_addChildren:function(e){for(var t=e.length;t--;){var n=e[t];if(!n)continue;if(n.__isExpression)this._children.push(n);else if(typeof n=="object")for(var r in n)this._addChildren([n[r]])}},filterAllChildren:function(e){var t=[];return this.traverseChildren(function(n){e(n)&&t.push(n)}),t},traverseChildren:function(e){e(this);for(var t=this._children.length;t--;){var n=this._children[t];n.traverseChildren(e)}}}),t.exports=i},{protoclass:82}],29:[function(e,t,n){function i(e,t,n){this.scripts=e,this.contentTemplate=t,this.childBlock=n,r.apply(this,arguments)}var r=e("./base");r.extend(i,{type:"blockBinding",toJavaScript:function(){var e="block("+this.scripts.value.value.toJavaScript()+", "+(this.contentTemplate?this.contentTemplate.toJavaScript():"void 0");return this.childBlock&&(e+=", "+this.childBlock.toJavaScript()),e+")"}}),t.exports=i},{"./base":28}],30:[function(e,t,n){function i(e,t){this.reference=e,this.parameters=t,r.apply(this,arguments)}var r=e("./base");r.extend(i,{type:"call",toJavaScript:function(){var e=this.reference.path.concat(),t="this.call(";return t+="["+e.map(function(e){return'"'+e+'"'}).join(",")+"]",t+=", ["+this.parameters.toJavaScript()+"]",t+")"}}),t.exports=i},{"./base":28}],31:[function(e,t,n){function i(e){this.value=e,r.apply(this,arguments)}var r=e("./base");r.extend(i,{type:"commentNode",toJavaScript:function(){return'comment("'+this.value.replace(/["]/g,'\\"')+'")'}}),t.exports=i},{"./base":28}],32:[function(e,t,n){function i(e){this.value=e,r.apply(this,arguments)}var r=e("./base");r.extend(i,{type:"doctype",toJavaScript:function(){return"text('<!DOCTYPE "+this.value+">')"}}),t.exports=i},{"./base":28}],33:[function(e,t,n){function s(e,t,n){this.name=e,this.attributes=t,this.childNodes=n||new i,r.apply(this,arguments)}var r=e("./base"),i=e("./array");r.extend(s,{type:"elementNode",toJavaScript:function(){return'element("'+this.name+'", '+this.attributes.toJavaScript()+", "+this.childNodes.toJavaScript()+")"}}),t.exports=s},{"./array":26,"./base":28}],34:[function(e,t,n){function i(e){this.expression=e,r.apply(this,arguments)}var r=e("./base");r.extend(i,{type:"call",toJavaScript:function(){return"("+this.expression.toJavaScript()+")"}}),t.exports=i},{"./base":28}],35:[function(e,t,n){function i(e){this.value=e,r.apply(this,arguments)}var r=e("./base");r.extend(i,{type:"hash",toJavaScript:function(){var e=[];for(var t in this.value){var n=this.value[t];e.push("'"+t+"':"+n.toJavaScript())}return"{"+e.join(", ")+"}"}}),t.exports=i},{"./base":28}],36:[function(e,t,n){function i(e){this.value=e,r.apply(this,arguments)}var r=e("./base");r.extend(i,{type:"literal",toJavaScript:function(){return String(this.value)}}),t.exports=i},{"./base":28}],37:[function(e,t,n){function i(e,t){this.name=e,this.parameters=t,r.apply(this,arguments)}var r=e("./base");r.extend(i,{type:"modifier",toJavaScript:function(){var e="modifiers."+this.name+".call(this",t=this.parameters.toJavaScript();return t.length&&(e+=", "+t),e+")"}}),t.exports=i},{"./base":28}],38:[function(e,t,n){function i(e,t){this.operator=e,this.expression=t,r.apply(this,arguments)}var r=e("./base");r.extend(i,{type:"!",toJavaScript:function(){return this.operator+this.expression.toJavaScript()}}),t.exports=i},{"./base":28}],39:[function(e,t,n){function i(e,t,n){this.operator=e,this.left=t,this.right=n,r.apply(this,arguments)}var r=e("./base");r.extend(i,{type:"operator",toJavaScript:function(){return this.left.toJavaScript()+this.operator+this.right.toJavaScript()}}),t.exports=i},{"./base":28}],40:[function(e,t,n){function i(e){this.expressions=e||[],r.apply(this,arguments)}var r=e("./base");r.extend(i,{type:"parameters",toJavaScript:function(){return this.expressions.map(function(e){return e.toJavaScript()}).join(", ")}}),t.exports=i},{"./base":28}],41:[function(e,t,n){function i(e,t){this.path=e,this.bindingType=t,this.fast=t==="^",this.unbound=["~","~>"].indexOf(t)!==-1,this._isBoundTo=~["<~","<~>","~>"].indexOf(this.bindingType),r.apply(this,arguments)}var r=e("./base");r.extend(i,{type:"reference",toJavaScript:function(){if(!this._isBoundTo&&this.fast)return"this.context."+this.path.join(".");var e=this.path.map(function(e){return"'"+e+"'"}).join(", ");return this._isBoundTo?"this.reference(["+e+"], "+(this.bindingType!=="<~")+")":"this.get(["+e+"])"}}),t.exports=i},{"./base":28}],42:[function(e,t,n){function i(e){this.childNodes=e,r.apply(this,arguments)}var r=e("./base");r.extend(i,{type:"rootNode",toJavaScript:function(){var e="(function(fragment, block, element, text, comment, parser, modifiers) { ",t;if(this.childNodes.type==="array")if(this.childNodes.expressions.expressions.length>1)t="fragment("+this.childNodes.toJavaScript()+")";else{if(!this.childNodes.expressions.expressions.length)return e+"})";t=this.childNodes.expressions.expressions[0].toJavaScript()}else t=this.childNodes.toJavaScript();return e+"return "+t+"; })"}}),t.exports=i},{"./base":28}],43:[function(e,t,n){function s(e){this.value=e,r.apply(this,arguments)}var r=e("./base"),i=e("../../utils/uniq");r.extend(s,{type:"script",toJavaScript:function(){var e=this.filterAllChildren(function(e){return e.type==="reference"}).filter(function(e){return!e.unbound&&e.path}).map(function(e){return e.path});e=i(e.map(function(e){return e.join(".")})).map(function(e){return e.split(".")});var t="{";return t+="run: function() { return "+this.value.toJavaScript()+"; }",t+=", refs: "+JSON.stringify(e),t+"}"}}),t.exports=s},{"../../utils/uniq":77,"./base":28}],44:[function(e,t,n){function i(e){this.value=e,r.apply(this,arguments)}var r=e("./base");r.extend(i,{type:"string",toJavaScript:function(){return'"'+this.value.replace(/"/g,'\\"')+'"'}}),t.exports=i},{"./base":28}],45:[function(e,t,n){function i(e,t,n){this.condition=e,this.tExpression=t,this.fExpression=n,r.apply(this,arguments)}var r=e("./base");r.extend(i,{type:"ternaryCondition",toJavaScript:function(){return this.condition.toJavaScript()+"?"+this.tExpression.toJavaScript()+":"+this.fExpression.toJavaScript()}}),t.exports=i},{"./base":28}],46:[function(e,t,n){function i(e){this.value=he.decode(e),this.decoded=this.value!==e,r.apply(this,arguments)}var r=e("./base");r.extend(i,{type:"textNode",toJavaScript:function(){return'text("'+this.value.replace(/["]/g,'\\"')+'")'}}),t.exports=i},{"./base":28}],47:[function(e,t,n){var r=e("./parser"),i={},s;t.exports={parse:s=function(e){return'"use strict";module.exports = '+r.parse(e).toJavaScript()},compile:function(e){var t;if(i[e])return i[e];t||(t=e);var n='"use strict";return '+r.parse(t).toJavaScript();return i[e]=(new Function(n))()}}},{"./parser":48}],48:[function(e,t,n){t.exports=function(){function t(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}function n(e,t,n,r,i,s){this.message=e,this.expected=t,this.found=n,this.offset=r,this.line=i,this.column=s,this.name="SyntaxError"}function r(t){function Jr(){return t.substring(Rr,qr)}function Kr(){return Rr}function Qr(){return ei(Rr).line}function Gr(){return ei(Rr).column}function Yr(e){throw ni(null,[{type:"other",description:e}],Rr)}function Zr(e){throw ni(e,null,Rr)}function ei(e){function n(e,n,r){var i,s;for(i=n;i<r;i++)s=t.charAt(i),s==="\n"?(e.seenCR||e.line++,e.column=1,e.seenCR=!1):s==="\r"||s==="\u2028"||s==="\u2029"?(e.line++,e.column=1,e.seenCR=!0):(e.column++,e.seenCR=!1)}return Ur!==e&&(Ur>e&&(Ur=0,zr={line:1,column:1,seenCR:!1}),n(zr,Ur,e),Ur=e),zr}function ti(e){if(qr<Wr)return;qr>Wr&&(Wr=qr,Xr=[]),Xr.push(e)}function ni(e,r,i){function s(e){var t=1;e.sort(function(e,t){return e.description<t.description?-1:e.description>t.description?1:0});while(t<e.length)e[t-1]===e[t]?e.splice(t,1):t++}function o(e,t){function n(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+t(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+t(e)}).replace(/[\u0180-\u0FFF]/g,function(e){return"\\u0"+t(e)}).replace(/[\u1080-\uFFFF]/g,function(e){return"\\u"+t(e)})}var r=new Array(e.length),i,s,o;for(o=0;o<e.length;o++)r[o]=e[o].description;return i=e.length>1?r.slice(0,-1).join(", ")+" or "+r[e.length-1]:r[0],s=t?'"'+n(t)+'"':"end of input","Expected "+i+" but "+s+" found."}var u=ei(i),a=i<t.length?t.charAt(i):null;return r!==null&&s(r),new n(e!==null?e:o(r,a),r,a,i,u.line,u.column)}function ri(){var e;return e=ii(),e}function ii(){var e,t;return e=qr,t=oi(),t!==i&&(Rr=e,t=u(t)),e=t,e}function si(){var e,n,r,s,o,u;e=qr,t.substr(qr,9)===f?(n=f,qr+=9):(n=i,Vr===0&&ti(l));if(n!==i){r=is();if(r!==i){s=[],h.test(t.charAt(qr))?(o=t.charAt(qr),qr++):(o=i,Vr===0&&ti(p));if(o!==i)while(o!==i)s.push(o),h.test(t.charAt(qr))?(o=t.charAt(qr),qr++):(o=i,Vr===0&&ti(p));else s=a;s!==i?(o=is(),o!==i?(t.charCodeAt(qr)===62?(u=d,qr++):(u=i,Vr===0&&ti(v)),u!==i?(Rr=e,n=m(s),e=n):(qr=e,e=a)):(qr=e,e=a)):(qr=e,e=a)}else qr=e,e=a}else qr=e,e=a;return e}function oi(){var e,t,n;e=qr,t=[],n=ai(),n===i&&(n=fi(),n===i&&(n=yi(),n===i&&(n=ui())));while(n!==i)t.push(n),n=ai(),n===i&&(n=fi(),n===i&&(n=yi(),n===i&&(n=ui())));return t!==i&&(Rr=e,t=g(t)),e=t,e}function ui(){var e,n,r,s,o,u,f;e=qr,n=is();if(n!==i){t.substr(qr,4)===y?(r=y,qr+=4):(r=i,Vr===0&&ti(b));if(r!==i){s=[],o=qr,u=qr,Vr++,t.substr(qr,3)===E?(f=E,qr+=3):(f=i,Vr===0&&ti(S)),Vr--,f===i?u=w:(qr=u,u=a),u!==i?(f=ns(),f!==i?(Rr=o,u=x(f),o=u):(qr=o,o=a)):(qr=o,o=a);if(o!==i)while(o!==i)s.push(o),o=qr,u=qr,Vr++,t.substr(qr,3)===E?(f=E,qr+=3):(f=i,Vr===0&&ti(S)),Vr--,f===i?u=w:(qr=u,u=a),u!==i?(f=ns(),f!==i?(Rr=o,u=x(f),o=u):(qr=o,o=a)):(qr=o,o=a);else s=a;s!==i?(t.substr(qr,3)===E?(o=E,qr+=3):(o=i,Vr===0&&ti(S)),o!==i?(u=is(),u!==i?(Rr=e,n=T(s),e=n):(qr=e,e=a)):(qr=e,e=a)):(qr=e,e=a)}else qr=e,e=a}else qr=e,e=a;return e===i&&(e=si()),e}function ai(){var e,t,n,r;return e=qr,t=ci(),t!==i?(n=oi(),n!==i?(r=di(),r!==i?(Rr=e,t=N(t,n,r),e=t):(qr=e,e=a)):(qr=e,e=a)):(qr=e,e=a),e===i&&(e=hi()),e}function fi(){var e,t,n;e=qr,t=[],n=li();if(n!==i)while(n!==i)t.push(n),n=li();else t=a;return t!==i&&(Rr=e,t=C(t)),e=t,e}function li(){var e,n,r;return e=qr,n=qr,Vr++,t.charCodeAt(qr)===60?(r=k,qr++):(r=i,Vr===0&&ti(L)),r===i&&(t.substr(qr,2)===A?(r=A,qr+=2):(r=i,Vr===0&&ti(O))),Vr--,r===i?n=w:(qr=n,n=a),n!==i?(r=ns(),r!==i?(Rr=e,n=M(),e=n):(qr=e,e=a)):(qr=e,e=a),e}function ci(){var e,n,r,s,o,u;return e=qr,n=is(),n!==i?(t.charCodeAt(qr)===60?(r=k,qr++):(r=i,Vr===0&&ti(L)),r!==i?(s=pi(),s!==i?(t.charCodeAt(qr)===62?(o=d,qr++):(o=i,Vr===0&&ti(v)),o!==i?(u=is(),u!==i?(Rr=e,n=_(s),e=n):(qr=e,e=a)):(qr=e,e=a)):(qr=e,e=a)):(qr=e,e=a)):(qr=e,e=a),e}function hi(){var e,n,r,s,o,u;return e=qr,n=is(),n!==i?(t.charCodeAt(qr)===60?(r=k,qr++):(r=i,Vr===0&&ti(L)),r!==i?(s=pi(),s!==i?(t.substr(qr,2)===D?(o=D,qr+=2):(o=i,Vr===0&&ti(P)),o!==i?(u=is(),u!==i?(Rr=e,n=H(s),e=n):(qr=e,e=a)):(qr=e,e=a)):(qr=e,e=a)):(qr=e,e=a)):(qr=e,e=a),e}function pi(){var e,t,n,r,s;e=qr,t=vi();if(t!==i){n=is();if(n!==i){r=[],s=mi();while(s!==i)r.push(s),s=mi();r!==i?(s=is(),s!==i?(Rr=e,t=B(t,r),e=t):(qr=e,e=a)):(qr=e,e=a)}else qr=e,e=a}else qr=e,e=a;return e}function di(){var e,n,r,s;return e=qr,t.substr(qr,2)===j?(n=j,qr+=2):(n=i,Vr===0&&ti(F)),n!==i?(r=vi(),r!==i?(t.charCodeAt(qr)===62?(s=d,qr++):(s=i,Vr===0&&ti(v)),s!==i?(Rr=e,n=I(r),e=n):(qr=e,e=a)):(qr=e,e=a)):(qr=e,e=a),e}function vi(){var e,n,r,s;e=qr,n=is();if(n!==i){r=[],q.test(t.charAt(qr))?(s=t.charAt(qr),qr++):(s=i,Vr===0&&ti(R));if(s!==i)while(s!==i)r.push(s),q.test(t.charAt(qr))?(s=t.charAt(qr),qr++):(s=i,Vr===0&&ti(R));else r=a;r!==i?(Rr=e,n=U(r),e=n):(qr=e,e=a)}else qr=e,e=a;return e}function mi(){var e,n,r,s,o,u;return e=qr,n=vi(),n!==i?(r=is(),r!==i?(t.charCodeAt(qr)===61?(s=z,qr++):(s=i,Vr===0&&ti(W)),s!==i?(o=is(),o!==i?(u=gi(),u!==i?(Rr=e,n=X(n,u),e=n):(qr=e,e=a)):(qr=e,e=a)):(qr=e,e=a)):(qr=e,e=a)):(qr=e,e=a),e===i&&(e=qr,n=vi(),n!==i&&(Rr=e,n=V(n)),e=n),e}function gi(){var e,n,r,s,o,u,f,l;e=qr,t.charCodeAt(qr)===34?(n=$,qr++):(n=i,Vr===0&&ti(J));if(n!==i){r=[],s=Si();if(s===i){s=qr,o=[],u=qr,f=qr,Vr++,t.substr(qr,2)===A?(l=A,qr+=2):(l=i,Vr===0&&ti(O)),Vr--,l===i?f=w:(qr=f,f=a),f!==i?(K.test(t.charAt(qr))?(l=t.charAt(qr),qr++):(l=i,Vr===0&&ti(Q)),l!==i?(f=[f,l],u=f):(qr=u,u=a)):(qr=u,u=a);if(u!==i)while(u!==i)o.push(u),u=qr,f=qr,Vr++,t.substr(qr,2)===A?(l=A,qr+=2):(l=i,Vr===0&&ti(O)),Vr--,l===i?f=w:(qr=f,f=a),f!==i?(K.test(t.charAt(qr))?(l=t.charAt(qr),qr++):(l=i,Vr===0&&ti(Q)),l!==i?(f=[f,l],u=f):(qr=u,u=a)):(qr=u,u=a);else o=a;o!==i&&(Rr=s,o=G()),s=o}while(s!==i){r.push(s),s=Si();if(s===i){s=qr,o=[],u=qr,f=qr,Vr++,t.substr(qr,2)===A?(l=A,qr+=2):(l=i,Vr===0&&ti(O)),Vr--,l===i?f=w:(qr=f,f=a),f!==i?(K.test(t.charAt(qr))?(l=t.charAt(qr),qr++):(l=i,Vr===0&&ti(Q)),l!==i?(f=[f,l],u=f):(qr=u,u=a)):(qr=u,u=a);if(u!==i)while(u!==i)o.push(u),u=qr,f=qr,Vr++,t.substr(qr,2)===A?(l=A,qr+=2):(l=i,Vr===0&&ti(O)),Vr--,l===i?f=w:(qr=f,f=a),f!==i?(K.test(t.charAt(qr))?(l=t.charAt(qr),qr++):(l=i,Vr===0&&ti(Q)),l!==i?(f=[f,l],u=f):(qr=u,u=a)):(qr=u,u=a);else o=a;o!==i&&(Rr=s,o=G()),s=o}}r!==i?(t.charCodeAt(qr)===34?(s=$,qr++):(s=i,Vr===0&&ti(J)),s!==i?(Rr=e,n=Y(r),e=n):(qr=e,e=a)):(qr=e,e=a)}else qr=e,e=a;if(e===i){e=qr,t.charCodeAt(qr)===39?(n=Z,qr++):(n=i,Vr===0&&ti(et));if(n!==i){r=[],s=Si();if(s===i){s=qr,o=[],u=qr,f=qr,Vr++,t.substr(qr,2)===A?(l=A,qr+=2):(l=i,Vr===0&&ti(O)),Vr--,l===i?f=w:(qr=f,f=a),f!==i?(tt.test(t.charAt(qr))?(l=t.charAt(qr),qr++):(l=i,Vr===0&&ti(nt)),l!==i?(f=[f,l],u=f):(qr=u,u=a)):(qr=u,u=a);if(u!==i)while(u!==i)o.push(u),u=qr,f=qr,Vr++,t.substr(qr,2)===A?(l=A,qr+=2):(l=i,Vr===0&&ti(O)),Vr--,l===i?f=w:(qr=f,f=a),f!==i?(tt.test(t.charAt(qr))?(l=t.charAt(qr),qr++):(l=i,Vr===0&&ti(nt)),l!==i?(f=[f,l],u=f):(qr=u,u=a)):(qr=u,u=a);else o=a;o!==i&&(Rr=s,o=G()),s=o}while(s!==i){r.push(s),s=Si();if(s===i){s=qr,o=[],u=qr,f=qr,Vr++,t.substr(qr,2)===A?(l=A,qr+=2):(l=i,Vr===0&&ti(O)),Vr--,l===i?f=w:(qr=f,f=a),f!==i?(tt.test(t.charAt(qr))?(l=t.charAt(qr),qr++):(l=i,Vr===0&&ti(nt)),l!==i?(f=[f,l],u=f):(qr=u,u=a)):(qr=u,u=a);if(u!==i)while(u!==i)o.push(u),u=qr,f=qr,Vr++,t.substr(qr,2)===A?(l=A,qr+=2):(l=i,Vr===0&&ti(O)),Vr--,l===i?f=w:(qr=f,f=a),f!==i?(tt.test(t.charAt(qr))?(l=t.charAt(qr),qr++):(l=i,Vr===0&&ti(nt)),l!==i?(f=[f,l],u=f):(qr=u,u=a)):(qr=u,u=a);else o=a;o!==i&&(Rr=s,o=G()),s=o}}r!==i?(t.charCodeAt(qr)===39?(s=Z,qr++):(s=i,Vr===0&&ti(et)),s!==i?(Rr=e,n=Y(r),e=n):(qr=e,e=a)):(qr=e,e=a)}else qr=e,e=a;e===i&&(e=qr,n=Si(),n!==i&&(Rr=e,n=rt(n)),e=n)}return e}function yi(){var e,n,r;return e=qr,t.substr(qr,3)===it?(n=it,qr+=3):(n=i,Vr===0&&ti(st)),n!==i?(r=bi(),r!==i?(Rr=e,n=ot(r),e=n):(qr=e,e=a)):(qr=e,e=a),e===i&&(e=Ei()),e}function bi(){var e,t,n,r,s,o;return e=qr,t=xi(),t!==i?(n=is(),n!==i?(r=ii(),r!==i?(s=is(),s!==i?(o=wi(),o!==i?(Rr=e,t=ut(t,r,o),e=t):(qr=e,e=a)):(qr=e,e=a)):(qr=e,e=a)):(qr=e,e=a)):(qr=e,e=a),e}function wi(){var e,n,r;return e=qr,t.substr(qr,3)===at?(n=at,qr+=3):(n=i,Vr===0&&ti(ft)),n!==i?(r=bi(),r!==i?(Rr=e,n=lt(r),e=n):(qr=e,e=a)):(qr=e,e=a),e===i&&(e=qr,t.substr(qr,5)===ct?(n=ct,qr+=5):(n=i,Vr===0&&ti(ht)),n!==i?(r=is(),r!==i?(Rr=e,n=pt(),e=n):(qr=e,e=a)):(qr=e,e=a)),e}function Ei(){var e,n,r,s,o,u;return e=qr,t.substr(qr,2)===A?(n=A,qr+=2):(n=i,Vr===0&&ti(O)),n!==i?(r=is(),r!==i?(s=Ti(),s!==i?(o=is(),o!==i?(t.substr(qr,2)===dt?(u=dt,qr+=2):(u=i,Vr===0&&ti(vt)),u!==i?(Rr=e,n=mt(s),e=n):(qr=e,e=a)):(qr=e,e=a)):(qr=e,e=a)):(qr=e,e=a)):(qr=e,e=a),e}function Si(){var e,n,r,s,o,u;return e=qr,t.substr(qr,2)===A?(n=A,qr+=2):(n=i,Vr===0&&ti(O)),n!==i?(r=is(),r!==i?(s=Ti(),s!==i?(o=is(),o!==i?(t.substr(qr,2)===dt?(u=dt,qr+=2):(u=i,Vr===0&&ti(vt)),u!==i?(Rr=e,n=gt(s),e=n):(qr=e,e=a)):(qr=e,e=a)):(qr=e,e=a)):(qr=e,e=a)):(qr=e,e=a),e}function xi(){var e,n,r,s,o;return e=qr,n=is(),n!==i?(r=$i(),r!==i?(s=is(),s!==i?(t.substr(qr,2)===dt?(o=dt,qr+=2):(o=i,Vr===0&&ti(vt)),o!==i?(Rr=e,n=yt(r),e=n):(qr=e,e=a)):(qr=e,e=a)):(qr=e,e=a)):(qr=e,e=a),e===i&&(e=qr,n=Ti(),n!==i?(r=is(),r!==i?(t.substr(qr,2)===dt?(s=dt,qr+=2):(s=i,Vr===0&&ti(vt)),s!==i?(Rr=e,n=gt(n),e=n):(qr=e,e=a)):(qr=e,e=a)):(qr=e,e=a)),e}function Ti(){var e,n,r,s,o,u,f,l;e=qr,n=Ki(),n!==i&&(Rr=e,n=bt(n)),e=n;if(e===i){e=qr,n=is();if(n!==i){r=Ni();if(r!==i){s=is();if(s!==i){o=[],u=qr,t.charCodeAt(qr)===44?(f=wt,qr++):(f=i,Vr===0&&ti(Et)),f!==i?(l=Qi(),l!==i?(f=[f,l],u=f):(qr=u,u=a)):(qr=u,u=a);while(u!==i)o.push(u),u=qr,t.charCodeAt(qr)===44?(f=wt,qr++):(f=i,Vr===0&&ti(Et)),f!==i?(l=Qi(),l!==i?(f=[f,l],u=f):(qr=u,u=a)):(qr=u,u=a);o!==i?(Rr=e,n=St(r,o),e=n):(qr=e,e=a)}else qr=e,e=a}else qr=e,e=a}else qr=e,e=a}return e}function Ni(){var e,n,r,s,o,u;return e=qr,n=Li(),n!==i?(t.charCodeAt(qr)===63?(r=xt,qr++):(r=i,Vr===0&&ti(Tt)),r!==i?(s=Ni(),s!==i?(t.charCodeAt(qr)===58?(o=Nt,qr++):(o=i,Vr===0&&ti(Ct)),o!==i?(u=Ni(),u!==i?(Rr=e,n=kt(n,s,u),e=n):(qr=e,e=a)):(qr=e,e=a)):(qr=e,e=a)):(qr=e,e=a)):(qr=e,e=a),e===i&&(e=Li()),e}function Ci(){var e,n,r,s;return e=qr,t.charCodeAt(qr)===40?(n=Lt,qr++):(n=i,Vr===0&&ti(At)),n!==i?(r=ki(),r!==i?(t.charCodeAt(qr)===41?(s=Ot,qr++):(s=i,Vr===0&&ti(Mt)),s!==i?(Rr=e,n=_t(r),e=n):(qr=e,e=a)):(qr=e,e=a)):(qr=e,e=a),e===i&&(e=qr,t.substr(qr,2)===Dt?(n=Dt,qr+=2):(n=i,Vr===0&&ti(Pt)),n!==i&&(Rr=e,n=Ht()),e=n),e}function ki
(){var e,n,r,s,o,u;e=qr,n=Ni();if(n!==i){r=[],s=qr,t.charCodeAt(qr)===44?(o=wt,qr++):(o=i,Vr===0&&ti(Et)),o!==i?(u=Ni(),u!==i?(o=[o,u],s=o):(qr=s,s=a)):(qr=s,s=a);while(s!==i)r.push(s),s=qr,t.charCodeAt(qr)===44?(o=wt,qr++):(o=i,Vr===0&&ti(Et)),o!==i?(u=Ni(),u!==i?(o=[o,u],s=o):(qr=s,s=a)):(qr=s,s=a);r!==i?(Rr=e,n=Bt(n,r),e=n):(qr=e,e=a)}else qr=e,e=a;return e}function Li(){var e,n,r,s;return e=qr,n=Di(),n!==i?(t.charCodeAt(qr)===61?(r=z,qr++):(r=i,Vr===0&&ti(W)),r!==i?(s=Li(),s!==i?(Rr=e,n=jt(n,s),e=n):(qr=e,e=a)):(qr=e,e=a)):(qr=e,e=a),e===i&&(e=Ai()),e}function Ai(){var e,n,r,s;return e=qr,n=Oi(),n!==i?(t.substr(qr,2)===Ft?(r=Ft,qr+=2):(r=i,Vr===0&&ti(It)),r===i&&(t.substr(qr,2)===qt?(r=qt,qr+=2):(r=i,Vr===0&&ti(Rt)),r===i&&(t.substr(qr,3)===Ut?(r=Ut,qr+=3):(r=i,Vr===0&&ti(zt)),r===i&&(t.substr(qr,2)===Wt?(r=Wt,qr+=2):(r=i,Vr===0&&ti(Xt)),r===i&&(t.substr(qr,3)===Vt?(r=Vt,qr+=3):(r=i,Vr===0&&ti($t)),r===i&&(t.substr(qr,2)===Jt?(r=Jt,qr+=2):(r=i,Vr===0&&ti(Kt)),r===i&&(t.substr(qr,3)===Qt?(r=Qt,qr+=3):(r=i,Vr===0&&ti(Gt)),r===i&&(t.substr(qr,2)===Yt?(r=Yt,qr+=2):(r=i,Vr===0&&ti(Zt)),r===i&&(t.charCodeAt(qr)===62?(r=d,qr++):(r=i,Vr===0&&ti(v)),r===i&&(t.substr(qr,3)===en?(r=en,qr+=3):(r=i,Vr===0&&ti(tn)),r===i&&(t.substr(qr,2)===nn?(r=nn,qr+=2):(r=i,Vr===0&&ti(rn)),r===i&&(t.charCodeAt(qr)===60?(r=k,qr++):(r=i,Vr===0&&ti(L)),r===i&&(t.charCodeAt(qr)===43?(r=sn,qr++):(r=i,Vr===0&&ti(on)),r===i&&(t.charCodeAt(qr)===45?(r=un,qr++):(r=i,Vr===0&&ti(an)),r===i&&(t.charCodeAt(qr)===37?(r=fn,qr++):(r=i,Vr===0&&ti(ln)),r===i&&(t.charCodeAt(qr)===42?(r=cn,qr++):(r=i,Vr===0&&ti(hn)),r===i&&(t.charCodeAt(qr)===47?(r=pn,qr++):(r=i,Vr===0&&ti(dn)))))))))))))))))),r!==i?(s=Ai(),s!==i?(Rr=e,n=vn(n,r,s),e=n):(qr=e,e=a)):(qr=e,e=a)):(qr=e,e=a),e===i&&(e=Oi()),e}function Oi(){var e,t,n,r;return e=qr,t=is(),t!==i?(n=Mi(),n!==i?(r=is(),r!==i?(Rr=e,t=mn(n),e=t):(qr=e,e=a)):(qr=e,e=a)):(qr=e,e=a),e}function Mi(){var e,t,n,r;e=qr,t=Pi();if(t!==i){n=[],r=_i();while(r!==i)n.push(r),r=_i();n!==i?(Rr=e,t=gn(t,n),e=t):(qr=e,e=a)}else qr=e,e=a;return e===i&&(e=Xi(),e===i&&(e=Di())),e}function _i(){var e,n,r,s,o,u;return e=qr,t.charCodeAt(qr)===124?(n=yn,qr++):(n=i,Vr===0&&ti(bn)),n!==i?(r=is(),r!==i?(s=$i(),s!==i?(o=Ci(),o===i&&(o=wn),o!==i?(u=is(),u!==i?(Rr=e,n=En(s,o),e=n):(qr=e,e=a)):(qr=e,e=a)):(qr=e,e=a)):(qr=e,e=a)):(qr=e,e=a),e}function Di(){var e,t,n,r;return e=qr,t=is(),t!==i?(n=Hi(),n!==i?(r=is(),r!==i?(Rr=e,t=Sn(n),e=t):(qr=e,e=a)):(qr=e,e=a)):(qr=e,e=a),e}function Pi(){var e,n,r;return e=qr,t.charCodeAt(qr)===33?(n=xn,qr++):(n=i,Vr===0&&ti(Tn)),n===i&&(t.charCodeAt(qr)===45?(n=un,qr++):(n=i,Vr===0&&ti(an))),n!==i?(r=Pi(),r!==i?(Rr=e,n=Nn(n,r),e=n):(qr=e,e=a)):(qr=e,e=a),e===i&&(e=Ii(),e===i&&(e=Xi(),e===i&&(e=Di()))),e}function Hi(){var e;return e=Fi(),e===i&&(e=Ji(),e===i&&(e=Bi(),e===i&&(e=Zi(),e===i&&(e=Vi())))),e}function Bi(){var e,n,r,s,o,u;e=qr,n=qr,t.charCodeAt(qr)===45?(r=un,qr++):(r=i,Vr===0&&ti(an)),r===i&&(r=wn);if(r!==i){s=qr,o=[],Cn.test(t.charAt(qr))?(u=t.charAt(qr),qr++):(u=i,Vr===0&&ti(kn));if(u!==i)while(u!==i)o.push(u),Cn.test(t.charAt(qr))?(u=t.charAt(qr),qr++):(u=i,Vr===0&&ti(kn));else o=a;o!==i?(u=ji(),u===i&&(u=wn),u!==i?(o=[o,u],s=o):(qr=s,s=a)):(qr=s,s=a),s===i&&(s=ji()),s!==i?(r=[r,s],n=r):(qr=n,n=a)}else qr=n,n=a;return n!==i&&(Rr=e,n=Ln(n)),e=n,e}function ji(){var e,n,r,s;e=qr,t.charCodeAt(qr)===46?(n=An,qr++):(n=i,Vr===0&&ti(On));if(n!==i){r=[],Cn.test(t.charAt(qr))?(s=t.charAt(qr),qr++):(s=i,Vr===0&&ti(kn));if(s!==i)while(s!==i)r.push(s),Cn.test(t.charAt(qr))?(s=t.charAt(qr),qr++):(s=i,Vr===0&&ti(kn));else r=a;r!==i?(n=[n,r],e=n):(qr=e,e=a)}else qr=e,e=a;return e}function Fi(){var e,n,r,s;return e=qr,t.charCodeAt(qr)===40?(n=Lt,qr++):(n=i,Vr===0&&ti(At)),n!==i?(r=Ni(),r!==i?(t.charCodeAt(qr)===41?(s=Ot,qr++):(s=i,Vr===0&&ti(Mt)),s!==i?(Rr=e,n=Mn(r),e=n):(qr=e,e=a)):(qr=e,e=a)):(qr=e,e=a),e}function Ii(){var e,t;return e=qr,t=qi(),t===i&&(t=Ri(),t===i&&(t=Wi(),t===i&&(t=Ui(),t===i&&(t=zi())))),t!==i&&(Rr=e,t=_n(t)),e=t,e}function qi(){var e,n;return e=qr,t.substr(qr,4)===Dn?(n=Dn,qr+=4):(n=i,Vr===0&&ti(Pn)),n===i&&(t.substr(qr,5)===Hn?(n=Hn,qr+=5):(n=i,Vr===0&&ti(Bn))),n!==i&&(Rr=e,n=jn(n)),e=n,e}function Ri(){var e,n;return e=qr,t.substr(qr,9)===Fn?(n=Fn,qr+=9):(n=i,Vr===0&&ti(In)),n!==i&&(Rr=e,n=qn()),e=n,e}function Ui(){var e,n;return e=qr,t.substr(qr,3)===Rn?(n=Rn,qr+=3):(n=i,Vr===0&&ti(Un)),n!==i&&(Rr=e,n=zn()),e=n,e}function zi(){var e,n;return e=qr,t.substr(qr,8)===Wn?(n=Wn,qr+=8):(n=i,Vr===0&&ti(Xn)),n!==i&&(Rr=e,n=Vn()),e=n,e}function Wi(){var e,n;return e=qr,t.substr(qr,4)===$n?(n=$n,qr+=4):(n=i,Vr===0&&ti(Jn)),n===i&&(t.substr(qr,4)===Kn?(n=Kn,qr+=4):(n=i,Vr===0&&ti(Qn))),n!==i&&(Rr=e,n=Gn()),e=n,e}function Xi(){var e,t,n;return e=qr,t=Di(),t!==i?(n=Ci(),n!==i?(Rr=e,t=Yn(t,n),e=t):(qr=e,e=a)):(qr=e,e=a),e}function Vi(){var e,n,r,s,o,u,f,l;e=qr,t.charCodeAt(qr)===94?(n=Zn,qr++):(n=i,Vr===0&&ti(er)),n===i&&(t.substr(qr,2)===tr?(n=tr,qr+=2):(n=i,Vr===0&&ti(nr)),n===i&&(t.substr(qr,3)===rr?(n=rr,qr+=3):(n=i,Vr===0&&ti(ir)),n===i&&(t.charCodeAt(qr)===126?(n=sr,qr++):(n=i,Vr===0&&ti(or)),n===i&&(t.substr(qr,2)===ur?(n=ur,qr+=2):(n=i,Vr===0&&ti(ar)))))),n===i&&(n=wn);if(n!==i){r=is();if(r!==i){s=$i();if(s!==i){o=[],u=qr,t.charCodeAt(qr)===46?(f=An,qr++):(f=i,Vr===0&&ti(On)),f!==i?(l=$i(),l!==i?(f=[f,l],u=f):(qr=u,u=a)):(qr=u,u=a);while(u!==i)o.push(u),u=qr,t.charCodeAt(qr)===46?(f=An,qr++):(f=i,Vr===0&&ti(On)),f!==i?(l=$i(),l!==i?(f=[f,l],u=f):(qr=u,u=a)):(qr=u,u=a);o!==i?(u=is(),u!==i?(Rr=e,n=fr(n,s,o),e=n):(qr=e,e=a)):(qr=e,e=a)}else qr=e,e=a}else qr=e,e=a}else qr=e,e=a;return e}function $i(){var e,n,r;e=qr,n=[],lr.test(t.charAt(qr))?(r=t.charAt(qr),qr++):(r=i,Vr===0&&ti(cr));if(r!==i)while(r!==i)n.push(r),lr.test(t.charAt(qr))?(r=t.charAt(qr),qr++):(r=i,Vr===0&&ti(cr));else n=a;return n!==i&&(Rr=e,n=hr(n)),e=n,e}function Ji(){var e,n,r,s,o,u;return e=qr,t.charCodeAt(qr)===123?(n=pr,qr++):(n=i,Vr===0&&ti(dr)),n!==i?(r=is(),r!==i?(s=Ki(),s===i&&(s=wn),s!==i?(o=is(),o!==i?(t.charCodeAt(qr)===125?(u=vr,qr++):(u=i,Vr===0&&ti(mr)),u!==i?(Rr=e,n=gr(s),e=n):(qr=e,e=a)):(qr=e,e=a)):(qr=e,e=a)):(qr=e,e=a)):(qr=e,e=a),e}function Ki(){var e,t;return e=qr,t=Qi(),t!==i&&(Rr=e,t=yr(t)),e=t,e}function Qi(){var e,n,r,s,o,u;e=qr,n=Gi();if(n!==i){r=[],s=qr,t.charCodeAt(qr)===44?(o=wt,qr++):(o=i,Vr===0&&ti(Et)),o!==i?(u=Qi(),u!==i?(o=[o,u],s=o):(qr=s,s=a)):(qr=s,s=a);while(s!==i)r.push(s),s=qr,t.charCodeAt(qr)===44?(o=wt,qr++):(o=i,Vr===0&&ti(Et)),o!==i?(u=Qi(),u!==i?(o=[o,u],s=o):(qr=s,s=a)):(qr=s,s=a);r!==i?(Rr=e,n=br(n,r),e=n):(qr=e,e=a)}else qr=e,e=a;return e}function Gi(){var e,n,r,s,o,u;return e=qr,n=is(),n!==i?(r=Yi(),r!==i?(s=is(),s!==i?(t.charCodeAt(qr)===58?(o=Nt,qr++):(o=i,Vr===0&&ti(Ct)),o!==i?(u=Ni(),u===i&&(u=wn),u!==i?(Rr=e,n=wr(r,u),e=n):(qr=e,e=a)):(qr=e,e=a)):(qr=e,e=a)):(qr=e,e=a)):(qr=e,e=a),e}function Yi(){var e,t;return e=qr,t=Zi(),t!==i&&(Rr=e,t=Er(t)),e=t,e===i&&(e=qr,t=$i(),t!==i&&(Rr=e,t=Sr(t)),e=t),e}function Zi(){var e,n,r,s;Vr++,e=qr,t.charCodeAt(qr)===34?(n=$,qr++):(n=i,Vr===0&&ti(J));if(n!==i){r=[],s=es();while(s!==i)r.push(s),s=es();r!==i?(t.charCodeAt(qr)===34?(s=$,qr++):(s=i,Vr===0&&ti(J)),s!==i?(Rr=e,n=Tr(r),e=n):(qr=e,e=a)):(qr=e,e=a)}else qr=e,e=a;if(e===i){e=qr,t.charCodeAt(qr)===39?(n=Z,qr++):(n=i,Vr===0&&ti(et));if(n!==i){r=[],s=ts();while(s!==i)r.push(s),s=ts();r!==i?(t.charCodeAt(qr)===39?(s=Z,qr++):(s=i,Vr===0&&ti(et)),s!==i?(Rr=e,n=Tr(r),e=n):(qr=e,e=a)):(qr=e,e=a)}else qr=e,e=a}return Vr--,e===i&&(n=i,Vr===0&&ti(xr)),e}function es(){var e,n,r;return e=qr,n=qr,Vr++,t.charCodeAt(qr)===34?(r=$,qr++):(r=i,Vr===0&&ti(J)),r===i&&(t.charCodeAt(qr)===92?(r=Nr,qr++):(r=i,Vr===0&&ti(Cr))),Vr--,r===i?n=w:(qr=n,n=a),n!==i?(r=ns(),r!==i?(Rr=e,n=kr(),e=n):(qr=e,e=a)):(qr=e,e=a),e===i&&(t.substr(qr,2)===Lr?(e=Lr,qr+=2):(e=i,Vr===0&&ti(Ar))),e}function ts(){var e,n,r;return e=qr,n=qr,Vr++,t.charCodeAt(qr)===39?(r=Z,qr++):(r=i,Vr===0&&ti(et)),r===i&&(t.charCodeAt(qr)===92?(r=Nr,qr++):(r=i,Vr===0&&ti(Cr))),Vr--,r===i?n=w:(qr=n,n=a),n!==i?(r=ns(),r!==i?(Rr=e,n=kr(),e=n):(qr=e,e=a)):(qr=e,e=a),e===i&&(t.substr(qr,2)===Or?(e=Or,qr+=2):(e=i,Vr===0&&ti(Mr))),e}function ns(){var e;return t.length>qr?(e=t.charAt(qr),qr++):(e=i,Vr===0&&ti(_r)),e}function rs(){var e,n,r;e=qr,n=[],Dr.test(t.charAt(qr))?(r=t.charAt(qr),qr++):(r=i,Vr===0&&ti(Pr));if(r!==i)while(r!==i)n.push(r),Dr.test(t.charAt(qr))?(r=t.charAt(qr),qr++):(r=i,Vr===0&&ti(Pr));else n=a;return n!==i&&(Rr=e,n=Hr(n)),e=n,e}function is(){var e,n;e=[],Br.test(t.charAt(qr))?(n=t.charAt(qr),qr++):(n=i,Vr===0&&ti(jr));while(n!==i)e.push(n),Br.test(t.charAt(qr))?(n=t.charAt(qr),qr++):(n=i,Vr===0&&ti(jr));return e}function ss(){var e,n;e=[],Fr.test(t.charAt(qr))?(n=t.charAt(qr),qr++):(n=i,Vr===0&&ti(Ir));while(n!==i)e.push(n),Fr.test(t.charAt(qr))?(n=t.charAt(qr),qr++):(n=i,Vr===0&&ti(Ir));return e}function ks(e){return As(e).replace(/(^\s+)|(\s+$)/,"")}function Ls(e){return e.replace(/(^\s+)|(\s+$)/,"").replace(/[\r\n]/g,"\\n")}function As(e){return e.replace(/[ \r\n\t]+/g," ")}function Os(){return ks(Jr())}function Ms(e){return e.length===1?e[0]:new Ts(new Ns(e))}function _s(e){e=e.filter(function(e){return!/^[\n\t\r]+$/.test(e.value)});var t=e.length===1&&e[0].type==="string"?e[0]:new Ts(new Ns(e));return t}function Ds(e){function t(e){var t,n;for(n=e.length;n--;){t=e[n];if(t.type!="textNode"||!!/\S/.test(t.value)||!!t.decoded)break;e.splice(n,1)}return e}return t(t(e.reverse()).reverse())}var r=arguments.length>1?arguments[1]:{},i={},s={Start:ri},o=ri,u=function(e){return new us(e)},a=i,f="<!DOCTYPE",l={type:"literal",value:"<!DOCTYPE",description:'"<!DOCTYPE"'},c=[],h=/^[^>]/,p={type:"class",value:"[^>]",description:"[^>]"},d=">",v={type:"literal",value:">",description:'">"'},m=function(e){return new hs(e.join(""))},g=function(e){return new Ts(new Ns(Ds(e)))},y="<!--",b={type:"literal",value:"<!--",description:'"<!--"'},w=void 0,E="-->",S={type:"literal",value:"-->",description:'"-->"'},x=function(e){return e},T=function(e){return new fs(Ls(e.join("")))},N=function(e,t,n){return e.name!=n.name&&Yr("</"+e.name+">"),new ls(e.name,e.attributes,t)},C=function(e){return new as(As(e.join("")))},k="<",L={type:"literal",value:"<",description:'"<"'},A="{{",O={type:"literal",value:"{{",description:'"{{"'},M=function(){return Jr()},_=function(e){return e},D="/>",P={type:"literal",value:"/>",description:'"/>"'},H=function(e){return new ls(e.name,e.attributes)},B=function(e,t){var n={};for(var r=0,i=t.length;r<i;r++){var s=t[r];n[s.name]=s.value}return{name:e,attributes:new ws(n)}},j="</",F={type:"literal",value:"</",description:'"</"'},I=function(e){return{name:e}},q=/^[a-zA-Z0-9:_.\-]/,R={type:"class",value:"[a-zA-Z0-9:_.\\-]",description:"[a-zA-Z0-9:_.\\-]"},U=function(e){return e.join("")},z="=",W={type:"literal",value:"=",description:'"="'},X=function(e,t){return{name:e,value:t}},V=function(e){return{name:e,value:new gs(!0)}},$='"',J={type:"literal",value:'"',description:'"\\""'},K=/^[^"]/,Q={type:"class",value:'[^"]',description:'[^"]'},G=function(){return new ys(As(Jr()))},Y=function(e){return _s(e)},Z="'",et={type:"literal",value:"'",description:'"\'"'},tt=/^[^']/,nt={type:"class",value:"[^']",description:"[^']"},rt=function(e){return _s([e])},it="{{#",st={type:"literal",value:"{{#",description:'"{{#"'},ot=function(e){return e},ut=function(e,t,n){return new cs(e,t,n)},at="{{/",ft={type:"literal",value:"{{/",description:'"{{/"'},lt=function(e){return new us(e)},ct="{{/}}",ht={type:"literal",value:"{{/}}",description:'"{{/}}"'},pt=function(){return void 0},dt="}}",vt={type:"literal",value:"}}",description:'"}}"'},mt=function(e){return new cs(e)},gt=function(e){return e},yt=function(e){var t={};return t[e]=new Es(new gs(!0)),new ws(t)},bt=function(e){for(var t in e)e[t]=new Es(e[t]);return new ws(e)},wt=",",Et={type:"literal",value:",",description:'","'},St=function(e,t){var n={value:new Es(e)};t=t.length?t[0][1]:[];for(var r=0,i=t.length;r<i;r++)n[t[r].key]=new Es(t[r].value);return new ws(n)},xt="?",Tt={type:"literal",value:"?",description:'"?"'},Nt=":",Ct={type:"literal",value:":",description:'":"'},kt=function(e,t,n){return new ps(e,t,n)},Lt="(",At={type:"literal",value:"(",description:'"("'},Ot=")",Mt={type:"literal",value:")",description:'")"'},_t=function(e){return e},Dt="()",Pt={type:"literal",value:"()",description:'"()"'},Ht=function(){return[]},Bt=function(e,t){return[e].concat(t.map(function(e){return e[1]}))},jt=function(e,t){return new ds(e,t)},Ft="&&",It={type:"literal",value:"&&",description:'"&&"'},qt="||",Rt={type:"literal",value:"||",description:'"||"'},Ut="===",zt={type:"literal",value:"===",description:'"==="'},Wt="==",Xt={type:"literal",value:"==",description:'"=="'},Vt="!==",$t={type:"literal",value:"!==",description:'"!=="'},Jt="!=",Kt={type:"literal",value:"!=",description:'"!="'},Qt=">==",Gt={type:"literal",value:">==",description:'">=="'},Yt=">=",Zt={type:"literal",value:">=",description:'">="'},en="<==",tn={type:"literal",value:"<==",description:'"<=="'},nn="<=",rn={type:"literal",value:"<=",description:'"<="'},sn="+",on={type:"literal",value:"+",description:'"+"'},un="-",an={type:"literal",value:"-",description:'"-"'},fn="%",ln={type:"literal",value:"%",description:'"%"'},cn="*",hn={type:"literal",value:"*",description:'"*"'},pn="/",dn={type:"literal",value:"/",description:'"/"'},vn=function(e,t,n){return new vs(t,e,n)},mn=function(e){return e},gn=function(e,t){for(var n=0,r=t.length;n<r;n++)e=new xs(t[n].name,new Ns([e].concat(t[n].parameters)));return e},yn="|",bn={type:"literal",value:"|",description:'"|"'},wn=null,En=function(e,t){return{name:e,parameters:t||[]}},Sn=function(e){return e},xn="!",Tn={type:"literal",value:"!",description:'"!"'},Nn=function(e,t){return new ms(e,t)},Cn=/^[0-9]/,kn={type:"class",value:"[0-9]",description:"[0-9]"},Ln=function(e){return new gs(parseFloat(Jr()))},An=".",On={type:"literal",value:".",description:'"."'},Mn=function(e){return new Cs(e)},_n=function(e){return new gs(e.value)},Dn="true",Pn={type:"literal",value:"true",description:'"true"'},Hn="false",Bn={type:"literal",value:"false",description:'"false"'},jn=function(e){return{type:"boolean",value:e==="true"}},Fn="undefined",In={type:"literal",value:"undefined",description:'"undefined"'},qn=function(){return{type:"undefined",value:void 0}},Rn="NaN",Un={type:"literal",value:"NaN",description:'"NaN"'},zn=function(){return{type:"nan",value:NaN}},Wn="Infinity",Xn={type:"literal",value:"Infinity",description:'"Infinity"'},Vn=function(){return{type:"infinity",value:Infinity}},$n="null",Jn={type:"literal",value:"null",description:'"null"'},Kn="NULL",Qn={type:"literal",value:"NULL",description:'"NULL"'},Gn=function(){return{type:"null",value:null}},Yn=function(e,t){return new Ss(e,new Ns(t))},Zn="^",er={type:"literal",value:"^",description:'"^"'},tr="~>",nr={type:"literal",value:"~>",description:'"~>"'},rr="<~>",ir={type:"literal",value:"<~>",description:'"<~>"'},sr="~",or={type:"literal",value:"~",description:'"~"'},ur="<~",ar={type:"literal",value:"<~",description:'"<~"'},fr=function(e,t,n){return n=[t].concat(n.map(function(e){return e[1]})),new bs(n,e)},lr=/^[a-zA-Z_$0-9]/,cr={type:"class",value:"[a-zA-Z_$0-9]",description:"[a-zA-Z_$0-9]"},hr=function(e){return Jr()},pr="{",dr={type:"literal",value:"{",description:'"{"'},vr="}",mr={type:"literal",value:"}",description:'"}"'},gr=function(e){return new ws(e)},yr=function(e){var t={};for(var n=0,r=e.length;n<r;n++)t[e[n].key]=e[n].value;return t},br=function(e,t){return[e].concat(t.length?t[0][1]:[])},wr=function(e,t){return{key:e,value:t||new gs(void 0)}},Er=function(e){return e.value},Sr=function(e){return e},xr={type:"other",description:"string"},Tr=function(e){return new ys(e.join(""))},Nr="\\",Cr={type:"literal",value:"\\",description:'"\\\\"'},kr=function(){return Jr()},Lr='\\"',Ar={type:"literal",value:'\\"',description:'"\\\\\\""'},Or="\\'",Mr={type:"literal",value:"\\'",description:'"\\\\\'"'},_r={type:"any",description:"any character"},Dr=/^[a-zA-Z]/,Pr={type:"class",value:"[a-zA-Z]",description:"[a-zA-Z]"},Hr=function(e){return e.join("")},Br=/^[ \n\r\t]/,jr={type:"class",value:"[ \\n\\r\\t]",description:"[ \\n\\r\\t]"},Fr=/^[\n\r\t]/,Ir={type:"class",value:"[\\n\\r\\t]",description:"[\\n\\r\\t]"},qr=0,Rr=0,Ur=0,zr={line:1,column:1,seenCR:!1},Wr=0,Xr=[],Vr=0,$r;if("startRule"in r){if(!(r.startRule in s))throw new Error("Can't start parsing from rule \""+r.startRule+'".');o=s[r.startRule]}var os=e("./ast/doctype"),us=e("./ast/rootNode"),as=e("./ast/textNode"),fs=e("./ast/commentNode"),ls=e("./ast/elementNode"),cs=e("./ast/blockBinding"),hs=e("./ast/doctype"),ps=e("./ast/ternaryCondition"),ds=e("./ast/assignment"),vs=e("./ast/operator"),ms=e("./ast/not"),gs=e("./ast/literal"),ys=e("./ast/string"),bs=e("./ast/reference"),ws=e("./ast/hash"),Es=e("./ast/script"),Ss=e("./ast/call"),xs=e("./ast/modifier"),Ts=e("./ast/array"),Ns=e("./ast/parameters"),Cs=e("./ast/group");$r=o();if($r!==i&&qr===t.length)return $r;throw $r!==i&&qr<t.length&&ti({type:"end",description:"end of input"}),ni(null,Xr,Wr)}return t(n,Error),{SyntaxError:n,parse:r}}()},{"./ast/array":26,"./ast/assignment":27,"./ast/blockBinding":29,"./ast/call":30,"./ast/commentNode":31,"./ast/doctype":32,"./ast/elementNode":33,"./ast/group":34,"./ast/hash":35,"./ast/literal":36,"./ast/modifier":37,"./ast/not":38,"./ast/operator":39,"./ast/parameters":40,"./ast/reference":41,"./ast/rootNode":42,"./ast/script":43,"./ast/string":44,"./ast/ternaryCondition":45,"./ast/textNode":46}],49:[function(e,t,n){(function(n,r){function u(e){this._animationQueue=[],this.tick=e.tick||o}var i=e("protoclass"),s=(r.requestAnimationFrame||r.webkitRequestAnimationFrame||r.mozRequestAnimationFrame||n.nextTick).bind(r);if(n.browser)var o=function(e){s(e)};else var o=function(e){e()};i(u,{deferOnce:function(e){if(e.__running)return;e.__running=!0,this._animationQueue.push(e);if(this._requestingFrame)return;this._requestingFrame=!0;var t=this;this.tick(function(){t.runNow(),t._requestingFrame=!1})},runNow:function(){if(!this._requestingFrame)return;var e=this._animationQueue;this._animationQueue=[];for(var t=0;t<e.length;t++){var n=e[t];n.__running=!1,n.update(),this._animationQueue.length&&this.runNow()}}}),t.exports=u}).call(this,e("_process"),typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{_process:78,protoclass:82}],50:[function(e,t,n){function r(e){var t=e.run,n=e.refs;return{refs:n,evaluate:function(e){return t.call(e)},bind:function(e,r){function o(){if(s)return this;s=!0;var n=i;return r(i=t.call(e),n),s=!1,this}var i,s=!1,u;if(!n.length)return{dispose:function(){},trigger:o};if(n.length===1)u=e.watch(n[0],o).dispose;else{var a=[];for(var f=n.length;f--;)a.push(e.watch(n[f],o));u=function(){for(var e=a.length;e--;)a[e].dispose()}}return{dispose:u,trigger:function(){return o(),this}}}}}function i(e,t){function r(t){return e.map(function(e){return typeof e=="string"?e:e.run.call(t)}).join("")}var n=e.filter(function(e){return typeof e!="string"}).map(function(e){return e});return{buffered:!0,evaluate:function(e){return r(e)},bind:function(e,t){function s(){return t(r(e)),this}var i=[];for(var o=n.length;o--;){var u=n[o];if(!u.refs)continue;for(var a=u.refs.length;a--;){var f=u.refs[a];i.push(e.watch(f,s))}}return{trigger:s,dispose:function(){for(var e=i.length;e--;)i[e].dispose()}}}}}function s(e,t){return{bind:function(t,n){return{trigger:function(){return n(e),this},dispose:function(){}}}}}t.exports=function(e){return typeof e!="object"?s(e):e.length?e.length===1?r(e[0].value):i(e.map(function(e){return typeof e=="object"?e.value:e})):r(e)}},{}],51:[function(e,t,n){function o(e,t,n){r.call(this,e,t,n)}function u(e,t,n){this.nodeFactory=e,this.startPath=t,this.endPath=n}var r=e("document-section").Section,i=e("protoclass"),s=e("../utils");r.extend(o,{rootNode:function(){return this.start.parentNode},createMarker:function(){return new u(this.nodeFactory,s.getNodePath(this.start),s.getNodePath(this.end))},clone:function(){var e=r.prototype.clone.call(this);return new o(this.nodeFactory,e.start,e.end)}}),i(u,{getSection:function(e){var t=s.getNodeByPath(e,this.startPath),n=s.getNodeByPath(e,this.endPath);return new o(this.nodeFactory,t,n)}}),t.exports=o},{"../utils":73,"document-section":79,protoclass:82}],52:[function(e,t,n){function o(e,t,n){this.node=t,this.nodeFactory=e}function u(e,t){this.nodePath=t,this.nodeFactory=e}var r=e("document-section").Section,i=e("protoclass"),s=e("../utils");i(o,{rootNode:function(){return this.node},createMarker:function(){return new u(this.nodeFactory,s.getNodePath(this.node))},appendChild:function(e){this.node.appendChild(e)},hide:function(){if(this._repl||!this.node.parentNode)return;var e=this.node;this._repl=this.nodeFactory.createTextNode(""),this.node.parentNode.insertBefore(this._repl,this.node),this.node.parentNode.removeChild(this.node)},show:function(){this._repl&&this._repl.parentNode&&(this._repl.parentNode.insertBefore(this.node,this._repl),this._repl.parentNode.removeChild(this._repl)),this._repl=void 0},removeAll:function(){this.node.innerHTML=""},render:function(){return this.node},remove:function(){this.node.parentNode&&this.node.parentNode.removeChild(this.node)},clone:function(){return new o(this.nodeFactory,this.node.cloneNode(!0))}}),i(u,{getSection:function(e){var t=s.getNodeByPath(e,this.nodePath);return new o(this.nodeFactory,t)}}),t.exports=o},{"../utils":73,"document-section":79,protoclass:82}],53:[function(e,t,n){function o(e){r.call(this,e)}var r=e("../components/base"),i=e("../utils/bind"),s=e("../utils/extend");t.exports=r.extend(o,{bind:function(){this._bindings=[],this.childContext=new this.contextClass(this.attributes),this.childView?(this.childView.setOptions({parent:this.view}),this.childView.bind(this.childContext)):(this.childView=this.template.view(this.childContext,{parent:this.view}),this.section.appendChild(this.childView.render())),r.prototype.bind.call(this)},unbind:function(){this.childView&&this.childView.unbind()},_onAttrsChange:function(e,t){this.childView&&this.childView.set(e,t)}})},{"../components/base":19,"../utils/bind":71,"../utils/extend":72}],54:[function(e,t,n){(function(n){function g(e,t){this.options=t,this.accessor=t.accessor,this.useCloneNode=!m,this.accessorClass=t.accessorClass||d.accessorClass,this.components=t.components||d.components,this.modifiers=t.modifiers||d.modifiers,this.attributes=t.attributes||d.attributes,this.runloop=t.runloop||d.runloop,this.nodeFactory=t.nodeFactory||i,typeof e=="function"?this.vnode=e(u.create,s.create,o.create,a.create,f.create,void 0,this.modifiers):this.vnode=e,this._viewPool=[],this.initialize()}var r=e("protoclass"),i=e("nofactor"),s=e("./vnode/block"),o=e("./vnode/element"),u=e("./vnode/fragment"),a=e("./vnode/text"),f=e("./vnode/comment"),l=e("./view"),c=e("../section/fragment"),h=e("../section/node"),p=e("./component"),d=e("../defaults"),v=e("../utils/extend"),m=!1;n.browser&&(m=!!~navigator.userAgent.toLowerCase().indexOf("msie")||!!~navigator.userAgent.toLowerCase().indexOf("trident")),t.exports=r(g,{initialize:function(){this.hydrators=[],this.section=new c(this.nodeFactory);var e=this.vnode.initialize(this);e.nodeType===11?(this.section=new c(this.nodeFactory),this.section.appendChild(e)):this.section=new h(this.nodeFactory,e);for(var t=this.hydrators.length;t--;)this.hydrators[t].initialize()},createComponentClass:function(e){return p.extend({template:this,contextClass:e||Object})},child:function(e,t){return new g(e,v(t,{},this.options))},view:function(e,t){var n;this.useCloneNode?n=this.section.clone():(this.initialize(),n=this.section);var r=this._viewPool.pop()||new l(this,this._viewPool,n,this.hydrators);return r.setOptions(t||{}),e&&r.bind(e),r}}),t.exports=function(e,n){var r,i=typeof e;if(i==="string")r=t.exports.parser.compile(e);else{if(i!=="function")throw new Error("source must either be type 'string' or 'function'");r=e}return new g(r,n||d)}}).call(this,e("_process"))},{"../defaults":25,"../section/fragment":51,"../section/node":52,"../utils/extend":72,"./component":53,"./view":55,"./vnode/block":60,"./vnode/comment":62,"./vnode/element":66,"./vnode/fragment":68,"./vnode/text":69,_process:78,nofactor:81,protoclass:82}],55:[function(e,t,n){function a(e,t,n,r){this.template=e,this.section=n,this.bindings=[],this._pool=t,this.accessor=e.accessor||new e.accessorClass,this.rootNode=n.rootNode(),this.transitions=new i,this.runloop=e.runloop;for(var o=0,u=r.length;o<u;o++)r[o].hydrate(this);this._dispose=s(this._dispose,this)}var r=e("protoclass"),i=e("./transitions"),s=e("../../utils/bind"),o=e("../../utils/stringifyNode"),u=e("./reference");r(a,{setOptions:function(e){this.parent=e.parent},get:function(e){var t=this.accessor.get(this.context,e);return t!=null?t:this.parent?this.parent.get(e):void 0},set:function(e,t){return this.accessor.set(this.context,e,t)},reference:function(e,t){return new u(this,e,t)},call:function(e,t){var n=this.accessor.get(this.context,e);return n?this.accessor.call(this.context,e,t):this.parent?this.parent.call(e,t):void 0},setProperties:function(e){for(var t in e)this.set(t,e[t])},watch:function(e,t){return this.accessor.watchProperty(this.context,e,t)},watchEvent:function(e,t,n){return this.accessor.watchEvent(e,t,n)},bind:function(e){this.context&&this.unbind(),e||(e={}),this.context=this.accessor.castObject(e);for(var t=0,n=this.bindings.length;t<n;t++)this.bindings[t].bind()},unbind:function(){for(var e=this.bindings.length;e--;)this.bindings[e].unbind()},render:function(){return this.context||this.bind({}),this.transitions.enter(),this.section.render()},remove:function(){return this.section.remove(),this},dispose:function(){if(this.transitions.exit(this._dispose))return;return this._dispose(),this},_dispose:function(){this.unbind(),this.section.remove(),this._pool.push(this)},toString:function(){var e=this.render();return this.template.nodeFactory.name==="dom"?o(e):e.toString()}}),t.exports=a},{"../../utils/bind":71,"../../utils/stringifyNode":76,"./reference":56,"./transitions":57,protoclass:82}],56:[function(e,t,n){function i(e,t,n){this.view=e,this.path=t,this.settable=n!==!1}var r=e("protoclass");r(i,{__isReference:!0,value:function(e){if(!arguments.length)return this.view.get(this.path);this.settable&&this.view.set(this.path,e)},toString:function(){return this.view.get(this.path)}}),t.exports=i},{protoclass:82}],57:[function(e,t,n){(function(n){function s(){this._enter=[],this._exit=[]}var r=e("protoclass"),i=e("../../utils/async");t.exports=r(s,{push:function(e){e.enter&&this._enter.push(e),e.exit&&this._exit.push(e)},enter:function(){if(!this._enter.length)return!1;for(var e=0,t=this._enter.length;e<t;e++)this._enter[e].enter()},exit:function(e){if(!this._exit.length)return!1;var t=this;return n.nextTick(function(){i.each(t._exit,function(e,t){e.exit(t)},e)}),!0}})}).call(this,e("_process"))},{"../../utils/async":70,_process:78,protoclass:82}],58:[function(e,t,n){function o(e,t,n){this.view=n,this.nodeFactory=n.template.nodeFactory,this.script=t,this.node=e,this.didChange=s(this.didChange,this)}var r=e("protoclass"),i=e("../../../utils"),s=e("../../../utils/bind");t.exports=r(o,{bind:function(){var e=this;this.binding=this.script.bind(this.view,function(t,n){if(t===e.currentValue)return;e.currentValue=t,e.didChange()}),this.currentValue=this.script.evaluate(this.view),this.currentValue!=null&&this.update()},didChange:function(){this.view.runloop.deferOnce(this)},update:function(){var e=String(this.currentValue==null?"":this.currentValue);this.nodeFactory.name!=="dom"?this.node.replaceText(e,!0):this.node.nodeValue=String(e)},unbind:function(){this.binding&&(this.binding.dispose(),this.binding=void 0)}})},{"../../../utils":73,"../../../utils/bind":71,protoclass:82}],59:[function(e,t,n){function o(e,t,n){this.node=e,this.script=t,this.bindingClass=n}var r=e("protoclass"),i=e("../../../utils"),s=e("./binding");t.exports=r(o,{initialize:function(){this.nodePath=i.getNodePath(this.node)},hydrate:function(e){var t=i.getNodeByPath(e.rootNode,this.nodePath);e.bindings.push(new this.bindingClass(t,this.script,e))}})},{"../../../utils":73,"./binding":58,protoclass:82}],60:[function(e,t,n){function f(e){this.script=s(e)}var r=e("protoclass"),i=e("../../../utils"),s=e("../../../script"),o=e("./hydrator"),u=e("./binding"),a=e("./unbound");t.exports=r(f,{initialize:function(e){var t=e.nodeFactory.createTextNode(""),n=this.script.refs.length?u:a;return e.hydrators.push(new o(t,this.script,n)),t}}),t.exports.create=function(e){return new f(e)}},{"../../../script":50,"../../../utils":73,"./binding":58,"./hydrator":59,"./unbound":61,protoclass:82}],61:[function(e,t,n){function s(e,t,n){this.view=n,this.nodeFactory=n.template.nodeFactory,this.script=t,this.node=e}var r=e("protoclass"),i=e("../../../utils");t.exports=r(s,{bind:function(){var e=this,t=this.script.evaluate(this.view);if(this.value===t)return;this.value=t;var n=String(t==null?"":t);this.nodeFactory.name!=="dom"?this.node.replaceText(n,!0):this.node.nodeValue=String(n)},unbind:function(){}})},{"../../../utils":73,protoclass:82}],62:[function(e,t,n){function i(e){this.value=e}var r=e("protoclass");t.exports=r(i,{initialize:function(e){return e.nodeFactory.createComment(this.value)}}),t.exports.create=function(e){return new i(e)}},{protoclass:82}],63:[function(e,t,n){function o(e,t,n,r){this.node=r,this.key=t,this.value=n,this.attrClass=e}var r=e("protoclass"),i=e("../../../utils"),s=e("./attributesBinding");t.exports=r(o,{initialize:function(){this.nodePath=i.getNodePath(this.node)},hydrate:function(e){var t=new this.attrClass({node:i.getNodeByPath(e.rootNode,this.nodePath),view:e,key:this.key,value:this.value});e.bindings.push(t)}})},{"../../../utils":73,"./attributesBinding":64,protoclass:82}],64:[function(e,t,n){function s(e,t,n,r){this.attributes=e,this.rawAttributes=t,this.component=n,this.view=r}var r=e("protoclass"),i=e("../../../utils");t.exports=r(s,{bind:function(){this.bindings=[];for(var e in this.rawAttributes){var t=this.rawAttributes[e];t.bind?this._bindAttr(e,t):this.attributes[e]=t}},_bindAttr:function(e,t){var n=this;this.bindings.push(t.bind(this.view,function(t,r){n.attributes[e]=t,n.view.runloop.deferOnce(n.component)})),n.attributes[e]=t.evaluate(this.view)},unbind:function(){if(!this.bindings)return;for(var e=this.bindings.length;e--;)this.bindings[e].dispose();this.bindings=[]}})},{"../../../utils":73,protoclass:82}],65:[function(e,t,n){function u(e,t,n,r,i){this.name=e,this.attributes=t,this.childTemplate=n,this.section=r,this.componentClass=i}var r=e("protoclass"),i=e("../../../utils"),s=e("./attributesBinding"),o=e("../../../utils/extend");t.exports=r(u,{initialize:function(){this.sectionMarker=this.section.createMarker()},hydrate:function(e){this.childTemplate.accessor=e.accessor;var t=this.sectionMarker.getSection(e.rootNode),n=o({},this.attributes),r=new this.componentClass({name:this.name,section:t,attributes:n,view:e,childTemplate:this.childTemplate});e.bindings.push(new s(n,this.attributes,r,e)),r.bind&&e.bindings.push(r)}})},{"../../../utils":73,"../../../utils/extend":72,"./attributesBinding":64,protoclass:82}],66:[function(e,t,n){function p(e,t,n){this.name=e,this.attributes=t,this.children=n}var r=e("protoclass"),i=e("../../../section/fragment"),s=e("../../../section/node"),o=e("../fragment"),u=e("../../../utils"),a=e("../../../script"),f=e("./componentHydrator"),l=e("./attributeHydrator"),c=e("./valueAttribute"),h=e("../../../utils/set");t.exports=r(p,{initialize:function(e){var t=e.components[this.name];if(t){var n=new i(e.nodeFactory);return e.hydrators.push(new f(this.name,this.attributes,e.child(this.children),n,t)),n.render()}var r=e.nodeFactory.createElement(this.name),o=!1,u={},a;for(var h in this.attributes){var p=this.attributes[h],d=typeof p,v=e.components[h],m=e.attributes[h];o=!!v||o,v?(a||(a=new s(e.nodeFactory,r)),e.hydrators.push(new f(this.name,typeof p=="object"?p:this.attributes,e.child(this.children),a,v))):m&&(!m.test||m.test(p))?e.hydrators.push(new l(m,h,p,r)):d==="string"?u[h]=p:e.hydrators.push(new l(c,h,p,r))}for(h in u)r.setAttribute(h,u[h]);return o||r.appendChild(this.children.initialize(e)),r}}),t.exports.create=function(e,t,n){var r={};for(var i in t){var s=t[i];h(r,i.toLowerCase(),typeof s=="object"?a(s):s)}return new p(e,r,new o(n))}},{"../../../script":50,"../../../section/fragment":51,"../../../section/node":52,"../../../utils":73,"../../../utils/set":74,"../fragment":68,"./attributeHydrator":63,"./componentHydrator":65,"./valueAttribute":67,protoclass:82}],67:[function(e,t,n){var r=e("../../../attributes/script");t.exports=r.extend({update:function(){if(this.currentValue==null)return this.node.removeAttribute(
this.key);this.node.setAttribute(this.key,this.currentValue)}})},{"../../../attributes/script":14}],68:[function(e,t,n){function i(e){this.children=e}var r=e("protoclass");t.exports=r(i,{initialize:function(e){return this.children.length===1?this.children[0].initialize(e):e.nodeFactory.createFragment(this.children.map(function(t){return t.initialize(e)}))}}),t.exports.create=function(e){return new i(e)}},{protoclass:82}],69:[function(e,t,n){function i(e){this.value=e}var r=e("protoclass");t.exports=r(i,{initialize:function(e){return/^\s+$/.test(this.value)?e.nodeFactory.createTextNode(" "):e.nodeFactory.createTextNode(this.value)}}),t.exports.create=function(e){return new i(e)}},{protoclass:82}],70:[function(e,t,n){t.exports={each:function(e,t,n){var r=e.length,i=0;e.forEach(function(e){var s=!1;t(e,function(){if(s)throw new Error("callback called twice");s=!0,++i===r&&n&&n()})})}}},{}],71:[function(e,t,n){t.exports=function(e,t){return function(){return e.apply(t,arguments)}}},{}],72:[function(e,t,n){t.exports=function(e){e||(e={});var t=Array.prototype.slice.call(arguments,1);for(var n=0,r=t.length;n<r;n++){var i=t[n];for(var s in i)e[s]=i[s]}return e}},{}],73:[function(e,t,n){var r=e("document-section");t.exports={getNodePath:function(e){var t=[],n=e.parentNode,r=e;while(n)t.unshift(Array.prototype.slice.call(n.childNodes).indexOf(r)),r=n,n=n.parentNode;return t},getNodeByPath:function(e,t){var n=e;for(var r=0,i=t.length;r<i;r++)n=n.childNodes[t[r]];return n},createSingleSection:e("./singleNodeSection")}},{"./singleNodeSection":75,"document-section":79}],74:[function(e,t,n){t.exports=function(e,t,n){var r=t.split("."),i=e;for(var s=0,o=r.length-1;s<o;s++){var u=r[s];i[u]||(i[u]={}),i=i[u]}i[r[r.length-1]]=n}},{}],75:[function(e,t,n){t.exports=function(e){return{node:e,render:function(){return e},remove:function(){e.parentNode.removeChild(e)},appendChild:function(t){e.appendChild(t)}}}},{}],76:[function(e,t,n){function r(e){var t="";if(e.nodeType===11){for(var n=0,i=e.childNodes.length;n<i;n++)t+=r(e.childNodes[n]);return t}return t=e.nodeValue||e.outerHTML||"",e.nodeType===8&&(t="<!--"+t+"-->"),t}t.exports=r},{}],77:[function(e,t,n){t.exports=function(e){var t={},n=e.concat();for(var r=n.length;r--;){var i=n[r];t[i]||(t[i]=0),++t[i]>1&&n.splice(r,1)}return n}},{}],78:[function(e,t,n){function o(){if(s)return;s=!0;var e,t=i.length;while(t){e=i,i=[];var n=-1;while(++n<t)e[n]();t=i.length}s=!1}function u(){}var r=t.exports={},i=[],s=!1;r.nextTick=function(e){i.push(e),s||setTimeout(o,0)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.on=u,r.addListener=u,r.once=u,r.off=u,r.removeListener=u,r.removeAllListeners=u,r.emit=u,r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},{}],79:[function(e,t,n){var r=e("protoclass"),i=e("nofactor"),s=function(e,t,n){this.nodeFactory=e=e||i["default"],this.start=t||e.createTextNode(""),this.end=n||e.createTextNode(""),this.visible=!0;if(!this.start.parentNode){var r=e.createFragment();r.appendChild(this.start),r.appendChild(this.end)}};s=r(s,{__isLoafSection:!0,render:function(){return this.start.parentNode},clone:function(){var e;return this.start.parentNode.nodeType===11?e=this.start.parentNode.cloneNode(!0):(e=this.nodeFactory.createFragment(),this.getChildNodes().forEach(function(t){e.appendChild(t.cloneNode(!0))})),new s(this.nodeFactory,e.childNodes[0],e.childNodes[e.childNodes.length-1])},remove:function(){return this.nodeFactory.createFragment(this.getChildNodes())},show:function(){return this._detached?(this.append.apply(this,this._detached.getInnerChildNodes()),this._detached=void 0,this.visible=!0,this):this},hide:function(){return this._detached=this.removeAll(),this.visible=!1,this},removeAll:function(){return this._section(this._removeAll())},_removeAll:function(){var e=this.start,t=this.end,n=e.nextSibling,r=[];while(n!=t)n.parentNode.removeChild(n),r.push(n),n=this.start.nextSibling;return r},append:function(){var e=Array.prototype.slice.call(arguments);if(!e.length)return;e.length>1?e=this.nodeFactory.createFragment(e):e=e[0],this.end.parentNode.insertBefore(e,this.end)},appendChild:function(){this.append.apply(this,arguments)},prepend:function(){var e=Array.prototype.slice.call(arguments);if(!e.length)return;e.length>1?e=this.nodeFactory.createFragment(e):e=e[0],this.start.parentNode.insertBefore(e,this.start.nextSibling)},prependChild:function(){this.prepend.apply(this,arguments)},replaceChildNodes:function(){this.removeAll(),this.append.apply(this,arguments)},toString:function(){var e=this.getChildNodes().map(function(e){return e.outerHTML||(e.nodeValue!=undefined&&e.nodeType==3?e.nodeValue:String(e))});return e.join("")},dispose:function(){if(this._disposed)return;this._disposed=!0,this.removeAll(),this.start.parentNode.removeChild(this.start),this.end.parentNode.removeChild(this.end)},getChildNodes:function(){var e=this.start,t=this.end.nextSibling,n=[];while(e!=t)n.push(e),e=e.nextSibling;return n},getInnerChildNodes:function(){var e=this.getChildNodes();return e.shift(),e.pop(),e},_section:function(e){var t=new s(this.nodeFactory);return t.append.apply(t,e),t}}),t.exports=function(e,t,n){return new s(e,t,n)},t.exports.Section=s},{nofactor:81,protoclass:82}],80:[function(e,t,n){function i(){}var r=e("protoclass");r(i,{createElement:function(e){},createFragment:function(){},createComment:function(e){},createTextNode:function(e){},parseHtml:function(e){}}),t.exports=i},{protoclass:82}],81:[function(e,t,n){function i(){}var r=e("./base");r.extend(i,{name:"dom",createElement:function(e){return document.createElement(e)},createComment:function(e){return document.createComment(e)},createTextNode:function(e){return document.createTextNode(e)},createFragment:function(e){e||(e=[]);var t=document.createDocumentFragment(),n=[];for(var r=0,i=e.length;r<i;r++)n.push(e[r]);for(var s=0,o=n.length;s<o;s++)t.appendChild(n[s]);return t}}),t.exports=new i},{"./base":80}],82:[function(e,t,n){function r(e,t){for(var n=0,r=t.length;n<r;n++){var i=t[n];for(var s in i)e[s]=i[s]}return e}function i(e,t){function s(){this.constructor=t}var n=Array.prototype.slice.call(arguments,2);return typeof t!="function"&&(t&&n.unshift(t),t=e,e=function(){}),r(t,e),s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype,t.parent=t.superclass=e,r(t.prototype,n),i.setup(t),t}i.setup=function(e){return e.extend||(e.extend=function(e){var t=Array.prototype.slice.call(arguments,0);return typeof e!="function"&&t.unshift(e=function(){e.parent.apply(this,arguments)}),i.apply(this,[this].concat(t))},e.mixin=function(e){r(this.prototype,arguments)},e.create=function(){var t=Object.create(e.prototype);return e.apply(t,arguments),t}),e},t.exports=i},{}]},{},[18]);