!function(a){"use strict";function g(a){const b=[];let c=a;for(;c.parentNode;)b.unshift(c.parentNode.childNodes.indexOf(c)),c=c.parentNode;return b}function h(a,b){let c=a;for(let d=0,e=b.length;d<e;d++)c=c.childNodes[b[d]];return c}class b{constructor(a,b,c){this.template=a,this.node=b,this.binding=c}dispose(){return this.template.$viewPool.push(this),this}update(a){return this.binding.update(a),this}detach(){return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this}}class c{constructor(a){this.targets=a,this.length=a.length}update(a){for(let b=0;b<this.length;b++)this.targets[b].update(a)}}class d{constructor(a,b){this.virtualNode=a,a.collectHydrators(this.hydrators=[]),this.nativeNode=a.toNativeNode(b.document),this.$viewPool=[]}createView(a){const d=this.$viewPool.shift();if(d)return d;const e=this.nativeNode.cloneNode(!0),f=[];for(const g of this.hydrators)f.push(g.createBinding(e));const h=new b(this,e,1===f.length?f[0]:new c(f));return 0!==arguments.length&&h.update(a),h}}class e{constructor(a,b,c,d){this.name=a,this.attributes=b,this.options=d,this.childNodes=c}collectHydrators(a){}toNativeNode(a){return a.createTextNode("")}}class f{constructor(a,b,c,d){this.name=a,this.attributes=b,this.options=d,this.childNodes=c;for(const e of c)e.parentNode=this}collectHydrators(a){for(const b in this.attributes){const c=this.attributes[b];"function"==typeof c&&a.push(this.createAttributeHydrator(b,c))}for(const c of this.childNodes)c.collectHydrators(a)}createAttributeHydrator(a,b){return new l(this,a,b)}toNativeNode(a){const b=a.createElement(this.name);for(const c in this.attributes){const a=this.attributes[c];/number|string/.test(typeof a)&&b.setAttribute(c,a)}for(const d of this.childNodes)b.appendChild(d.toNativeNode(a));return b}}class i{constructor(a){this.nodeValue=a}collectHydrators(a){"function"==typeof this.nodeValue&&a.push(new m(this,this.nodeValue))}toNativeNode(a){return a.createTextNode(this.nodeValue)}}class j{constructor(a){this.virtualNode=a,this.path=g(a)}}class k extends j{constructor(a,b){super(a),this.compute=b}}class l extends k{constructor(a,b,c){super(a,c),this.attributeName=b}createBinding(a){return new p(a,this)}}class m extends k{createBinding(a){return new q(a,this)}}class n{constructor(a,b){this.hydrator=b,this.node=h(a,b.path),this.virtualNode=b.virtualNode}}class o extends n{constructor(a,b){super(a,b),this._compute=b.compute}update(a){const b=this._compute(a);this.currentValue===b&&this._hasSetValue||(this._hasSetValue=!0,this._updateNode(this.currentValue=b))}}class p extends o{_updateNode(a){this.node.setAttribute(this.hydrator.attributeName,a)}}class q extends o{_updateNode(a){this.node.nodeValue=a}}const r=(a,b={})=>{const c=a=>{return new i(a)},e=(a,c={},d=[])=>{const e=b.components&&b.components[a]||f;return new e(a,c,d,b)},g="function"==typeof a?a(e,c):a;return new d(g,{document:b.document||global.document})};class s extends j{createBinding(a){return new t(a,this)}}class t extends n{update(a){const{childTemplate,attributes}=this.virtualNode,{node}=this,{each}=attributes,b=each(a)||[];this._currentItems||[];this._currentItems=b;const d=node.parentNode,e=Array.prototype.indexOf.call(d.childNodes,node),f=this.children||[],g=this.children=new Array(b.length);for(let h=0,i=b.length;h<i;h++){const a=b[h];let c;if(h<f.length)c=f[h];else{const b=d.childNodes[e+h],f=b.nextSibling;c=childTemplate.createView(a),f?d.insertBefore(c.node,f):d.appendChild(c.node)}c.update(a),g[h]=c}for(let h=b.length,i=f.length;h<i;h++)f[h].detach().dispose()}}class u extends e{constructor(a,b,c,d){super(a,b,[]),this.childTemplate=r(c[0],d)}collectHydrators(a){super.collectHydrators(a),a.push(new s(this))}toNativeNode(a){return a.createTextNode("")}}var v=Object.freeze({repeat:u});a.components=v,a.View=b,a.Template=d,a.VirtualComponent=e,a.VirtualElement=f,a.VirtualTextNode=i,a.Hydrator=j,a.Binding=n,a.createTemplate=r}(this.paperclip=this.paperclip||{});