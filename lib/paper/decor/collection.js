// Generated by CoffeeScript 1.6.2
var Collection, async;

async = require("async");

Collection = (function() {
  /*
  */
  function Collection(clip) {
    this.clip = clip;
    this._models = [];
  }

  /*
  */


  Collection.prototype.push = function(model) {
    return this._models.push(model);
  };

  /*
  */


  Collection.prototype.unbind = function() {
    var model, _i, _len, _ref, _results;

    this._bound = false;
    this.clip.dispose();
    _ref = this._models;
    _results = [];
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      model = _ref[_i];
      _results.push(model.unbind());
    }
    return _results;
  };

  /*
  */


  Collection.prototype.load = function(context) {
    var decor, _i, _len, _ref, _results;

    this.clip.reset(context);
    _ref = this._models;
    _results = [];
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      decor = _ref[_i];
      _results.push(decor.load(context));
    }
    return _results;
  };

  /*
  */


  Collection.prototype.bind = function() {
    var decor, _i, _len, _ref, _results;

    this.clip.watch();
    if (this._bound) {
      return;
    }
    this._bound = true;
    _ref = this._models;
    _results = [];
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      decor = _ref[_i];
      _results.push(decor.bind());
    }
    return _results;
  };

  return Collection;

})();

module.exports = Collection;
