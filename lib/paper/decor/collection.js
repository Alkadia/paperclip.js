// Generated by CoffeeScript 1.6.2
var Collection, async;

async = require("async");

Collection = (function() {
  /*
  */
  function Collection() {
    this._models = [];
  }

  /*
  */


  Collection.prototype.push = function(model) {
    return this._models.push(model);
  };

  /*
  */


  Collection.prototype.unbind = function() {
    var model, _i, _len, _ref, _ref1, _results;

    this._bound = false;
    if ((_ref = this.clip) != null) {
      _ref.dispose();
    }
    _ref1 = this._models;
    _results = [];
    for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
      model = _ref1[_i];
      _results.push(model.unbind());
    }
    return _results;
  };

  /*
  */


  Collection.prototype.load = function(stream) {
    var decor, _i, _len, _ref, _ref1, _results;

    if ((_ref = this.clip) != null) {
      _ref.reset(stream.context, false);
    }
    _ref1 = this._models;
    _results = [];
    for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
      decor = _ref1[_i];
      _results.push(decor.load(stream));
    }
    return _results;
  };

  /*
  */


  Collection.prototype.bind = function() {
    var decor, _i, _len, _ref, _results;

    if (this._bound) {
      return;
    }
    this._bound = true;
    _ref = this._models;
    _results = [];
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      decor = _ref[_i];
      _results.push(decor.bind());
    }
    return _results;
  };

  return Collection;

})();

module.exports = Collection;
