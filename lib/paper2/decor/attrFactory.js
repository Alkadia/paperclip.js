// Generated by CoffeeScript 1.6.2
var AttrDecor, Clip, ClippedBuffer, Collection, DataBindDecor, Factory, TextAttrBinding, attrDecorators, decor, _i, _len;

Collection = require("./collection");

ClippedBuffer = require("../../clip/buffer");

Clip = require("../../clip");

attrDecorators = {};

decor = [require("./attr/value"), require("./attr/click"), require("./attr/enter")];

for (_i = 0, _len = decor.length; _i < _len; _i++) {
  AttrDecor = decor[_i];
  attrDecorators[AttrDecor.scriptName] = AttrDecor;
}

DataBindDecor = require("./attr/dataBind");

TextAttrBinding = require("./attr/text");

Factory = (function() {
  function Factory() {}

  /*
  */


  Factory.prototype.getDecor = function(node) {
    var ad, attribute, clip, name, _j, _len1, _ref;

    decor = new Collection();
    if (node.attributes["data-bind"]) {
      decor.clip = clip = new Clip({
        script: node.attributes["data-bind"][0],
        watch: false
      });
      _ref = clip.scripts.names;
      for (_j = 0, _len1 = _ref.length; _j < _len1; _j++) {
        name = _ref[_j];
        if (ad = attrDecorators[name]) {
          decor.push(new ad(node, name, clip));
        } else {
          decor.push(new DataBindDecor(node, name, clip));
        }
      }
    }
    for (attribute in node.attributes) {
      decor.push(new TextAttrBinding(node, attribute, new ClippedBuffer(node.attributes[attribute])));
    }
    return decor;
  };

  return Factory;

})();

module.exports = new Factory;
